{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/common.js","webpack://exports/./src/iconQ.js"],"names":["kPluginDomain","iconQueryUrl","loginKey","_","context","i18nKey","lang","NSUserDefaults","standardUserDefaults","objectForKey","undefined","macOSVersion","NSDictionary","dictionaryWithContentsOfFile","objectAtIndex","split","slice","join","indexOf","setObject_forKey","encodeURIComponent","toString","length","get_","json","manifestPath","plugin","url","URLByAppendingPathComponent","path","jsonData","NSData","dataWithContentsOfFile","NSString","alloc","initWithData_encoding","NSUTF8StringEncoding","JSON","parse","i18Content","dialog","iconImage","NSImage","initByReferencingFile","urlForResourceNamed","alert","COSAlertWindow","new","setIcon","errorDialog","content","addButtonWithTitle","checkForUpdate","m9","setMessageText","m10","setInformativeText","runModal","initDefaults","pluginDomain","initialValues","defaults","defaultValues","dVal","key","nil","uploadContext","contextNow","document","NSDocumentController","sharedDocumentController","currentDocument","selection","selectedLayers","layers","paste","text","pasteBoard","NSPasteboard","generalPasteboard","declareTypes_owner","NSArray","arrayWithObject","NSPasteboardTypeString","setString_forType","rgb","a","sColor","toLowerCase","sColorNew","i","concat","sColorChange","push","parseInt","saveDefaults","newValues","request","args","aara","task","NSTask","init","setLaunchPath","setArguments","outputPipe","NSPipe","pipe","setStandardOutput","launch","responseData","fileHandleForReading","readDataToEndOfFile","networkRequest","zip","encodeData","result","o","get","sig","returnData","status","msg","post","getConfig","NSJSONSerialization","JSONObjectWithData_options_error","NSJSONReadingMutableContainers","openUrlInBrowser","NSWorkspace","sharedWorkspace","openURL","NSURL","URLWithString","createRadioButtons","options","selectedItem","ui","NSRadioButton","type","NSRadioModeMatrix","rows","Math","ceil","columns","selectedRow","floor","selectedColumn","buttonCell","NSButtonCell","setButtonType","buttonMatrix","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","NSMakeRect","setCellSize","NSMakeSize","cells","setTitle","setTag","setTransparent","setEnabled","selectCellAtRow_column","createRadioButtons2","createArtboard","obj","doc","artboard","MSArtboardGroup","setName","name","frame","setX","x","setY","y","setWidth","width","setHeight","height","currentPage","addLayer","hexToRgb","hex","exec","r","g","b","unique","res","len","item","j","jLen","MochaJSDelegate","selectorHandlerDict","uniqueClassName","NSUUID","UUID","UUIDString","delegateClassDesc","MOClassDescription","allocateDescriptionForClassWithName_superclass_","NSObject","registerClass","handlers","setHandlerForSelector","selectorString","func","handlerHasBeenSet","selector","NSSelectorFromString","dynamicHandler","functionToCall","apply","arguments","regex","match","dynamicFunction","eval","addInstanceMethodWithSelector_function_","removeHandlerForSelector","getHandlerForSelector","getAllHandlers","getClass","NSClassFromString","getClassInstance","SMPanel","coscript","setShouldKeepAround","self","encodeURI","titleBgColor","NSColor","colorWithRed_green_blue_alpha","contentBgColor","identifier","threadDictionary","NSThread","mainThread","Panel","NSPanel","setTitleVisibility","NSWindowTitleHidden","setTitlebarAppearsTransparent","standardWindowButton","NSWindowCloseButton","setHidden","hiddenClose","NSWindowMiniaturizeButton","NSWindowZoomButton","setFrame_display","setBackgroundColor","contentView","webView","WebView","initWithFrame","showX","showY","windowObject","windowScriptObject","delegate","webFrame","SMAction","DOMReady","stringify","data","evaluateWebScript","mainFrameURL","fragment","decodeURI","valueForKey","callback","floatWindow","orderOut","NSApp","stopModal","close","removeObjectForKey","closeflag","panel","NSOpenPanel","openPanel","setCanChooseDirectories","setCanCreateDirectories","setAllowedFileTypes","setAllowsOtherFileTypes","setExtensionHidden","clicked","NSFileHandlingPanelOKButton","firstURL","URLs","unformattedURL","stringWithFormat","file_path","stringByRemovingPercentEncoding","loginCallback","pushdataCallback","setWantsLayer","layer","setFrame","setCornerRadius","setMasksToBounds","setFrameLoadDelegate_","setMainFrameURL_","addSubview","closeButton","setCOSJSTargetFunction","sender","closeCallback","wantsStop","setAction","titlebarView","superview","titlebarViewController","view","titlebarContainerView","setFrameOrigin","NSMakePoint","setFrameSize","becomeKeyWindow","setLevel","NSFloatingWindowLevel","center","makeKeyAndOrderFront","runModalForWindow","iconQ","i18","ga","Analytics","usualKey","loginNameKey","iconSaveKey","iconVersionKey","projectChooseKey","categoryChooseKey","VERSION","currentVersion","currentIconVersion","choiceSVG","svgList","count","rect","className","sketch","api","myStyle","Style","fills","borders","selectedDocument","selectedPage","newShape","Rectangle","absoluteRect","size","style","objectID","child","children","k","moveToLayer_beforeLayer","select_byExpandingSelection","flagk","MSExportRequest","exportRequestsFromExportableLayer","firstObject","scale","format","save","NSSavePanel","savePanel","savePath","URL","saveArtboardOrSlice_toFile","dataWithContentsOfURL","string","replace","fm","NSFileManager","defaultManager","removeItemAtPath_error","removeFromParent","getSvg","queryProjectIcon","projectid","queryTypeIcon","categoryid","iconLogin","username","password","iconRegister","mail","addMember","invitedKey","getLogin","queryProject","version_check","list","uploadIconFunc","project","author","uploadIconsFunc","addProject","projectName","deleteProject","queryIconByName","addCategory","projectId","categoryName","deleteIcon","downloadZip","ids","svgtitle","pluginSketch","baseSvg","encodeBaseSvg","decodeURIComponent","isLogin","initData","nametest","chooseProject","chooseCategory","link","nowcontext","page","setCurrentArtboard","logo","stringWithString","dataUsingEncoding","svgImporter","MSSVGImporter","prepareToImportFromData","importedSVGLayer","importAsLayer","svgFrame","oldWidth","oldHeight","colorToReplace","color","fill","MSColor","addLayers","showMessage","m1","contentDrawView","currentView","midX","round","horizontalRuler","baseLine","zoomValue","midY","verticalRuler","m2","sendEvent","code","m17","m18","d","address","svgZipName","pngZipName","message","m19","action","m20","m21","settingsWindow","m28","m29","m67","m69","m68","newContext","m22","svg","namelist","version","setAllowsMultipleSelection","urls","theResponseData","theText","substr","lastIndexOf","upload","uploaddata","m23","m24","m25","m26","addTextLabelWithValue","m27","runModals","uploadReturn","m30","response","deleteid","id","pid","iconQRun"],"mappings":"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","file":"iconQ.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/iconQ.js\");\n","var kPluginDomain;\nvar iconQueryUrl = 'http://123.207.94.56:3000';\nvar loginKey = \"com.sketchplugins.wechat.iconLogin\";\n\nexport function _(context) {\n    var i18nKey = \"com.sketchplugins.wechat.i18n\";\n    var lang = NSUserDefaults.standardUserDefaults().objectForKey(i18nKey);\n    if (lang == undefined) {\n        var macOSVersion = NSDictionary.dictionaryWithContentsOfFile(\"/System/Library/CoreServices/SystemVersion.plist\").objectForKey(\"ProductVersion\") + \"\";\n        lang = NSUserDefaults.standardUserDefaults().objectForKey(\"AppleLanguages\").objectAtIndex(0);\n        lang = (macOSVersion >= \"10.12\") ? lang.split(\"-\").slice(0, -1).join(\"-\") : lang;\n        if (lang.indexOf('zh') > -1) {\n            lang = 'zhCN';\n        } else {\n            lang = 'enUS';\n        }\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n    if (encodeURIComponent(lang.toString()).length != 4) {\n        lang = 'enUS';\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n\n    function get_(json, context) {\n        var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Resources\").URLByAppendingPathComponent(\"i18n\").URLByAppendingPathComponent(json + \".json\").path();\n        var jsonData = NSData.dataWithContentsOfFile(manifestPath);\n        jsonData = NSString.alloc().initWithData_encoding(jsonData,NSUTF8StringEncoding);\n        return JSON.parse(jsonData);\n    }\n    var i18Content = {};\n    i18Content = get_(lang, context);\n\n    return i18Content;\n};\n\nexport function dialog(context) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    return alert;\n}\n\nexport function errorDialog(context,content) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    alert.addButtonWithTitle(_(context).checkForUpdate.m9);\n\n    alert.setMessageText(_(context).checkForUpdate.m10);\n    alert.setInformativeText(content);\n    return alert.runModal();\n}\n\nexport function initDefaults(pluginDomain, initialValues) {\n    kPluginDomain = pluginDomain;\n\n    var defaults = NSUserDefaults.standardUserDefaults().objectForKey(kPluginDomain);\n    var defaultValues = {};\n    var dVal;\n\n    for (var key in defaults) {\n        defaultValues[key] = defaults[key]\n    }\n\n    for (var key in initialValues) {\n        dVal = defaultValues[key]\n        if (dVal == nil) defaultValues[key] = initialValues[key]\n    }\n    return defaultValues;\n}\n\nexport function uploadContext(context) {\n    var contextNow = context;\n    contextNow.document = NSDocumentController.sharedDocumentController().currentDocument();\n    contextNow.selection = context.document.selectedLayers().layers();\n    return contextNow;\n}\n\nexport function paste(text) {\n    var pasteBoard = NSPasteboard.generalPasteboard();\n    pasteBoard.declareTypes_owner(NSArray.arrayWithObject(NSPasteboardTypeString),nil);\n    pasteBoard.setString_forType(text,NSPasteboardTypeString);\n}\n\nexport function rgb(a) {\n    var sColor = a.toLowerCase();\n    if (sColor.length === 4) {\n        var sColorNew = \"#\";\n        for (var i = 1; i < 4; i += 1) {\n            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n        }\n        sColor = sColorNew;\n    }\n    //处理六位的颜色值\n    var sColorChange = [];\n    for (var i = 1; i < 7; i += 2) {\n        sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n    }\n    return sColorChange;\n}\n\nexport function saveDefaults(newValues) {\n    \n}\n\nexport function request(args) {\n    var aara = [args];\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(aara);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\nexport function networkRequest(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\n// zip(['-q','-r','-m','-o','-j','/Users/liuxinyu/Desktop/123.zip','/Users/liuxinyu/Desktop/123'])\nexport function zip(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/zip\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n}\n\nexport function encodeData(jsonData) {\n    var result = {};\n    for (var o in jsonData) {\n        result[o] = typeof jsonData != 'object' ? encodeURIComponent(jsonData[o]) : encodeData(jsonData[o]);\n    }\n    return result;\n}\n\nexport function get(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest([iconQueryUrl + args[0] + '?sig=' + sig + '&' + args[1]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function post(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest(['-d', 'sig=' + sig + '&' + args[1], iconQueryUrl + args[0]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function getConfig(json, context) {\n    var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(json + \".json\").path();\n    return NSJSONSerialization.JSONObjectWithData_options_error(NSData.dataWithContentsOfFile(manifestPath), NSJSONReadingMutableContainers, nil);\n}\n\nexport function openUrlInBrowser(url) {\n    NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(url));\n}\n\nexport function createRadioButtons(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 2);\n    var columns = ((options.length < 2) ? 1 : 2);\n\n    var selectedRow = Math.floor(selectedItem / 2);\n    var selectedColumn = selectedItem - (selectedRow * 2);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(140, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createRadioButtons2(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 3);\n    var columns = 3;\n\n    var selectedRow = Math.floor(selectedItem / 3);\n    var selectedColumn = selectedItem - (selectedRow * 3);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(90, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createArtboard(context, obj) {\n    var doc = context.document;\n\n    var artboard = new MSArtboardGroup();\n\n    artboard.setName(obj.name);\n\n    var frame = artboard.frame();\n\n    frame.setX(obj.x);\n    frame.setY(obj.y);\n    frame.setWidth(obj.width);\n    frame.setHeight(obj.height);\n    doc.currentPage().addLayer(artboard);\n\n    return artboard;\n}\n\nexport function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (result) {\n        result = {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n        };\n    } else {\n        result = null;\n    }\n    return result;\n}\n\nexport function unique(a) {\n    var res = [];\n\n    for (var i = 0, len = a.length; i < len; i++) {\n        var item = a[i];\n\n        for (var j = 0, jLen = res.length; j < jLen; j++) {\n            if (res[j] === item)\n                break;\n        }\n\n        if (j === jLen)\n            res.push(item);\n    }\n\n    return res;\n}\n\n\nfunction MochaJSDelegate(selectorHandlerDict) {\n    var uniqueClassName = \"MochaJSDelegate_DynamicClass_\" + NSUUID.UUID().UUIDString();\n\n    var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName, NSObject);\n\n    delegateClassDesc.registerClass();\n\n    //  Handler storage\n\n    var handlers = {};\n\n    //  Define interface\n\n    this.setHandlerForSelector = function (selectorString, func) {\n        var handlerHasBeenSet = (selectorString in handlers);\n        var selector = NSSelectorFromString(selectorString);\n\n        handlers[selectorString] = func;\n\n        if (!handlerHasBeenSet) {\n            /*\n                For some reason, Mocha acts weird about arguments:\n                https://github.com/logancollins/Mocha/issues/28\n\n                We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n            */\n\n            var dynamicHandler = function () {\n                var functionToCall = handlers[selectorString];\n\n                if (!functionToCall) return;\n\n                return functionToCall.apply(delegateClassDesc, arguments);\n            };\n\n            var args = [],\n                regex = /:/g;\n            while (match = regex.exec(selectorString)) args.push(\"arg\" + args.length);\n\n            dynamicFunction = eval(\"(function(\" + args.join(\",\") + \"){ return dynamicHandler.apply(this, arguments); })\");\n\n            delegateClassDesc.addInstanceMethodWithSelector_function_(selector, dynamicFunction);\n        }\n    };\n\n    this.removeHandlerForSelector = function (selectorString) {\n        delete handlers[selectorString];\n    };\n\n    this.getHandlerForSelector = function (selectorString) {\n        return handlers[selectorString];\n    };\n\n    this.getAllHandlers = function () {\n        return handlers;\n    };\n\n    this.getClass = function () {\n        return NSClassFromString(uniqueClassName);\n    };\n\n    this.getClassInstance = function () {\n        return NSClassFromString(uniqueClassName).new();\n    };\n\n    //  Conveience\n\n    if (typeof selectorHandlerDict == \"object\") {\n        for (var selectorString in selectorHandlerDict) {\n            this.setHandlerForSelector(selectorString, selectorHandlerDict[selectorString]);\n        }\n    }\n};\n\n\n//  sketch-measure\n//  common.js\n//  github https://github.com/utom/sketch-measure\n//  Created by utom\n\nexport function SMPanel(options) {\n    coscript.setShouldKeepAround(true);\n    var self = this,\n        result = false;\n    options.url = encodeURI(\"file://\" + options.url);\n    var frame = NSMakeRect(0, 0, options.width, (options.height + 32)),\n        titleBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1),\n        contentBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1);\n\n    if (options.identifier) {\n        var threadDictionary = NSThread.mainThread().threadDictionary();\n        if (threadDictionary[options.identifier]) {\n            return false;\n        }\n    }\n\n    var Panel = NSPanel.alloc().init();\n    Panel.setTitleVisibility(NSWindowTitleHidden);\n    Panel.setTitlebarAppearsTransparent(true);\n    Panel.standardWindowButton(NSWindowCloseButton).setHidden(options.hiddenClose);\n    Panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n    Panel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n    Panel.setFrame_display(frame, false);\n    Panel.setBackgroundColor(contentBgColor);\n\n    var contentView = Panel.contentView();\n    var webView = WebView.alloc().initWithFrame(NSMakeRect(options.showX ? options.showX : 0, options.showY ? options.showY : 0, options.width, options.height));\n    var windowObject = webView.windowScriptObject(),\n        delegate = new MochaJSDelegate({\n            \"webView:didFinishLoadForFrame:\": (function (webView, webFrame) {\n                var SMAction = [\n                        \"function SMAction(hash, data){\",\n                        \"if(data){\",\n                        \"window.SMData = encodeURI(JSON.stringify(data));\",\n                        \"}\",\n                        \"window.location.hash = hash;\",\n                        \"}\"\n                    ].join(\"\"),\n                    DOMReady = [\n                        \"$(\",\n                        \"function(){\",\n                        \"init(\" + JSON.stringify(options.data) + \")\",\n                        \"}\",\n                        \");\"\n                    ].join(\"\");\n\n                windowObject.evaluateWebScript(SMAction);\n                windowObject.evaluateWebScript(DOMReady);\n            }),\n            \"webView:didChangeLocationWithinPageForFrame:\": (function (webView, webFrame) {\n                var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n                if (request == \"submit\") {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.callback(data);\n                    result = true;\n                } else if (request == \"close\") {\n                    if (!options.floatWindow) {\n                        Panel.orderOut(nil);\n                        NSApp.stopModal();\n                    } else {\n                        Panel.close();\n                    }\n                    threadDictionary.removeObjectForKey(options.identifier);\n                } else if (request == 'submitandclose') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    var closeflag = options.callback(data);\n                    result = true;\n                    if (closeflag) {\n                        if (!options.floatWindow) {\n                            Panel.orderOut(nil);\n                            NSApp.stopModal();\n                        } else {\n                            Panel.close();\n                        }\n                        threadDictionary.removeObjectForKey(options.identifier);\n                    }\n                } else if (request == 'file') {\n                    var panel = NSOpenPanel.openPanel();\n                    panel.setCanChooseDirectories(false);\n                    panel.setCanCreateDirectories(false);\n                    panel.setAllowedFileTypes([\"sketch\", \"json\"]);\n                    panel.setAllowsOtherFileTypes(false);\n                    panel.setExtensionHidden(false);\n                    var clicked = panel.runModal();\n                    if (clicked != NSFileHandlingPanelOKButton) {\n                        windowObject.evaluateWebScript(\"inputFile('\" + '' + \"')\");\n                        return;\n                    }\n                    var firstURL = panel.URLs().objectAtIndex(0);\n                    var unformattedURL = NSString.stringWithFormat(firstURL);\n                    var file_path = unformattedURL.stringByRemovingPercentEncoding();\n                    windowObject.evaluateWebScript(\"inputFile('\" + file_path + \"')\");\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                } else if (request == 'login') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.loginCallback(data, windowObject);\n                } else if (request == 'pushdata') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.pushdataCallback(data, windowObject);\n                }\n                // windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            })\n        });\n\n    contentView.setWantsLayer(true);\n    contentView.layer().setFrame(contentView.frame());\n    contentView.layer().setCornerRadius(6);\n    contentView.layer().setMasksToBounds(true);\n\n    webView.setBackgroundColor(contentBgColor);\n    webView.setFrameLoadDelegate_(delegate.getClassInstance());\n    webView.setMainFrameURL_(options.url);\n\n    contentView.addSubview(webView);\n\n    var closeButton = Panel.standardWindowButton(NSWindowCloseButton);\n    closeButton.setCOSJSTargetFunction(function (sender) {\n        var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n        if (options.closeCallback) {\n            options.closeCallback();\n        }\n\n        if (options.identifier) {\n            threadDictionary.removeObjectForKey(options.identifier);\n        }\n\n        self.wantsStop = true;\n        if (options.floatWindow) {\n            Panel.close();\n        } else {\n            Panel.orderOut(nil);\n            NSApp.stopModal();\n        }\n\n    });\n    closeButton.setAction(\"callAction:\");\n\n    var titlebarView = contentView.superview().titlebarViewController().view(),\n        titlebarContainerView = titlebarView.superview();\n    closeButton.setFrameOrigin(NSMakePoint(8, 8));\n    titlebarContainerView.setFrame(NSMakeRect(0, options.height, options.width, 32));\n    titlebarView.setFrameSize(NSMakeSize(options.width, 32));\n    titlebarView.setTransparent(true);\n    titlebarView.setBackgroundColor(titleBgColor);\n    titlebarContainerView.superview().setBackgroundColor(titleBgColor);\n\n    if (options.floatWindow) {\n        Panel.becomeKeyWindow();\n        Panel.setLevel(NSFloatingWindowLevel);\n        if (!options.showX || !options.showY) {\n            Panel.center();\n        }\n        Panel.makeKeyAndOrderFront(nil);\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        return webView;\n    } else {\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        NSApp.runModalForWindow(Panel);\n    }\n\n    return windowObject;\n}","import {_,dialog,errorDialog,initDefaults,saveDefaults,uploadContext,paste,rgb,request,networkRequest,zip,encodeData,get,post,getConfig,openUrlInBrowser,createRadioButtons,createRadioButtons2,createArtboard,hexToRgb,unique,SMPanel} from \"./common\";\n\nfunction iconQ(context) {\n    var i18 = _(context).iconQ;\n    var ga = new Analytics(context);\n    \n    var usualKey = \"com.sketchplugins.wechat.iconusual\";\n    var loginKey = \"com.sketchplugins.wechat.iconLogin\";\n    var loginNameKey = \"com.sketchplugins.wechat.iconLoginName\";\n    var iconSaveKey = \"com.sketchplugins.wechat.baseicon\";\n    var iconVersionKey = \"com.sketchplugins.wechat.baseiconversion\";\n    var projectChooseKey = \"com.sketchplugins.wechat.saveprojectchoose\";\n    var categoryChooseKey = \"com.sketchplugins.wechat.savecategorychoose\";\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n\n    var returnData = networkRequest([getConfig('config', context).VERSION])\n    var jsonData = NSString.alloc().initWithData_encoding(returnData, NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    var currentVersion = jsonData.currentIconVersion;\n\n    function choiceSVG(context) {\n        var svgList = [];\n        for (var i = 0; i < context.selection.count(); i++) {\n            var rect;\n            if (context.selection[i].className() == 'MSArtboardGroup' || context.selection[i].className() == 'MSLayerGroup') {\n                var sketch = context.api();\n                var myStyle = new sketch.Style()\n                myStyle.fills = ['rgba(255,255,255,0)'];\n                myStyle.borders = ['rgba(255,255,255,0)'];\n                sketch.selectedDocument.selectedPage.newShape({\n                    frame: new sketch.Rectangle(context.selection[i].absoluteRect().x(), context.selection[i].absoluteRect().y(), context.selection[i].rect().size.width, context.selection[i].rect().size.height),\n                    style: myStyle,\n                    name: '__tc__' + context.selection[i].objectID()\n                });\n                var child = context.document.currentPage().children();\n                for (var k = 0; k < child.length; k++) {\n                    if (child[k].name() == '__tc__' + context.selection[i].objectID()) {\n                        child[k].moveToLayer_beforeLayer(context.selection[i], context.selection[i]);\n                        child[k].select_byExpandingSelection(false, false);\n                        rect = child[k];\n                        break;\n                    }\n                }\n                var flagk = 0;\n                for (var k = 0; k < context.selection[i].layers().length; k++) {\n                    if (context.selection[i].layers()[flagk].name() != '__tc__' + context.selection[i].objectID()) {\n                        context.selection[i].layers()[flagk].moveToLayer_beforeLayer(context.selection[i], context.selection[i]);\n                    } else {\n                        flagk++;\n                    }\n                }\n            }\n            var slice = MSExportRequest.exportRequestsFromExportableLayer(context.selection[i]).firstObject();\n            slice.scale = '1';\n            slice.format = 'svg';\n            var save = NSSavePanel.savePanel();\n            var savePath = save.URL().path() + '.svg';\n            context.document.saveArtboardOrSlice_toFile(slice, savePath);\n            var content = NSData.dataWithContentsOfURL(NSURL.URLWithString('file:///' + encodeURIComponent(savePath)));\n            var string = NSString.alloc().initWithData_encoding(content, NSUTF8StringEncoding);\n            svgList.push({\n                content: encodeURIComponent(string),\n                name: (encodeURIComponent(context.selection[i].name().toString().replace(/\\s+/g, '_')))\n            });\n            var fm = NSFileManager.defaultManager();\n            fm.removeItemAtPath_error(savePath, nil);\n            if (context.selection[i].className() == 'MSArtboardGroup' || context.selection[i].className() == 'MSLayerGroup') {\n                rect.removeFromParent();\n            }\n        }\n        return svgList;\n    }\n\n    function getSvg() {\n        return post(['/users/getFiles']);\n    }\n\n    function queryProjectIcon(projectid) {\n        var r = post(['/users/queryIconByProId', 'projectid=' + projectid]);\n        return r;\n    }\n\n    function queryTypeIcon(categoryid) {\n        var r = post(['/users/queryIconByCateId', 'categoryid=' + categoryid]);\n        return r;\n    }\n\n    function iconLogin(data) {\n        var r = post(['/users/login', 'username=' + data.username + '&password=' + data.password]);\n        if (r.status == 200) {\n            NSUserDefaults.standardUserDefaults().setObject_forKey(data.username, loginNameKey);\n        }\n        return r;\n    }\n\n    function iconRegister(data) {\n        var r = post(['/users/register', 'username=' + data.username + '&password=' + data.password + '&mail=' + data.mail]);\n        if (r.status == 200) {\n            NSUserDefaults.standardUserDefaults().setObject_forKey(data.username, loginNameKey);\n        }\n        return r;\n    }\n\n    function addMember(data) {\n        var r = post(['/users/addMember', 'key=' + data.invitedKey]);\n        return r;\n    }\n\n    function getLogin() {\n        return post(['/users/login']);\n    }\n\n    function queryProject() {\n        var r = post(['/users/queryProject']);\n        return r;\n    }\n\n    function version_check(data) {\n        var r = post(['/users/version_check', 'projectid=' + data.projectid + '&list=' + JSON.stringify(data.list)]);\n        return r;\n    }\n\n\n    function uploadIconFunc(data) {\n        return post(['/users/single_upload', 'name=' + data.name + '&content=' + data.content + '&projectid=' + data.project + '&categoryid=' + data.type + '&author=' + data.author]);\n    }\n\n    function uploadIconsFunc(data) {\n        return post(['/users/batch_upload', 'list=' + JSON.stringify(data)]);\n    }\n\n    function addProject(data) {\n        return post(['/users/createProject', 'projectname=' + data.projectName]);\n    }\n\n    function deleteProject(data) {\n        return post(['/users/deleteProject', 'projectid=' + data.projectid]);\n    }\n\n    function queryIconByName(data) {\n        return post(['/users/queryIconByName', 'name=' + data.name + '&projectid=' + data.projectid]);\n\n    }\n\n    function addCategory(data) {\n        return post(['/users/createCategory', 'projectid=' + data.projectId + '&categoryname=' + data.categoryName]);\n    }\n\n    function deleteIcon(data) {\n        return post(['/users/deleteIcon', 'list=' + JSON.stringify([data])]);\n    }\n\n    function downloadZip(data) {\n        return get(['/users/createZip', 'projectid=' + data.projectId + '&id=' + encodeURIComponent(JSON.stringify(data.ids))]);\n    }\n\n    var svgtitle = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>';\n\n    var pluginSketch = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(\"library\").path();\n\n    var baseSvg;\n    if (!NSUserDefaults.standardUserDefaults().objectForKey(iconSaveKey) || NSUserDefaults.standardUserDefaults().objectForKey(iconVersionKey) != currentVersion) {\n        baseSvg = getSvg().data;\n        NSUserDefaults.standardUserDefaults().setObject_forKey(currentVersion, iconVersionKey);\n        NSUserDefaults.standardUserDefaults().setObject_forKey(baseSvg, iconSaveKey);\n    } else {\n        baseSvg = NSUserDefaults.standardUserDefaults().objectForKey(iconSaveKey);\n        var encodeBaseSvg = [];\n        for (var i = 0; i < baseSvg.length; i++) {\n            encodeBaseSvg.push({\n                author: decodeURIComponent(encodeURIComponent(baseSvg[i].author)),\n                content: decodeURIComponent(encodeURIComponent(baseSvg[i].content)),\n                name: decodeURIComponent(encodeURIComponent(baseSvg[i].name))\n            })\n        };\n        baseSvg = encodeBaseSvg;\n    }\n\n\n    var isLogin;\n    if (!NSUserDefaults.standardUserDefaults().objectForKey(loginKey) || NSUserDefaults.standardUserDefaults().objectForKey(loginKey).length() != 32) {\n        isLogin = false;\n    } else {\n        isLogin = getLogin();\n    }\n\n\n    var initData = {\n        data: baseSvg,\n        isLogin: isLogin,\n        i18: i18\n    };\n    if (isLogin == false || isLogin.status != 200) {\n        initData.isLogin = false;\n    } else {\n        var username = NSUserDefaults.standardUserDefaults().objectForKey(loginNameKey);\n        var b = '';\n        b += username;\n        initData.nametest = b;\n        var project = queryProject().list;\n        initData.project = project;\n        initData.chooseProject = encodeURIComponent(NSUserDefaults.standardUserDefaults().objectForKey(projectChooseKey) || '');\n        initData.chooseCategory = encodeURIComponent(NSUserDefaults.standardUserDefaults().objectForKey(categoryChooseKey) || '');\n\n        initData.isLogin = true;\n    }\n\n\n    SMPanel({\n        url: pluginSketch + \"/panel/icon.html\",\n        width: 560,\n        height: 580,\n        data: initData,\n        hiddenClose: false,\n        floatWindow: true,\n        identifier: \"icon\",\n        callback: function (data) {\n            if (data.type == 'link') {\n                openUrlInBrowser(data.link);\n                return;\n            } else if (data.type == 'public' || data.type == 'private') {\n                var nowcontext = uploadContext(context);\n                var page = nowcontext.document.currentPage();\n                data.name = data.name.replace('.svg', '');\n                page.setCurrentArtboard(null);\n\n                var logo = (data.content);\n                logo = svgtitle + logo.replace('xmlns=\"http://www.w3.org/2000/svg\"', 'version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"').replace(/<title>.*?<\\/title>/, '');\n                logo = NSString.stringWithString(logo);\n                logo = logo.dataUsingEncoding(NSUTF8StringEncoding);\n                var svgImporter = MSSVGImporter.svgImporter();\n                svgImporter.prepareToImportFromData(logo);\n                var importedSVGLayer = svgImporter.importAsLayer();\n                var svgFrame = importedSVGLayer.frame();\n                importedSVGLayer.name = data.name;\n\n                if (data.type == 'public') {\n                    var oldWidth = svgFrame.width();\n                    var oldHeight = svgFrame.height();\n                    svgFrame.setWidth(data.width);\n                    svgFrame.setHeight(data.width * oldHeight / oldWidth);\n                    var children = importedSVGLayer.children();\n                    var colorToReplace = hexToRgb(data.color);\n                    for (var j = 0; j < children.length; j++) {\n                        if (children[j].className() == 'MSShapeGroup') {\n                            var fill = children[j].style().fills().firstObject();\n                            fill.color = MSColor.colorWithRed_green_blue_alpha(colorToReplace.r / 255, colorToReplace.g / 255, colorToReplace.b / 255, 1.0);\n                        }\n                    }\n                } else {\n\n                }\n                \n                page.addLayers([importedSVGLayer]);\n                if (nowcontext.selection.length > 0) {\n                    svgFrame.setX(nowcontext.selection[0].absoluteRect().x());\n                    svgFrame.setY(nowcontext.selection[0].absoluteRect().y());\n                    nowcontext.document.showMessage(i18.m1 + ' ' + nowcontext.selection[0].name());\n\n                    for (var i = 0; i < nowcontext.selection.length; i++) {\n                        nowcontext.selection[i].select_byExpandingSelection(false, false);\n                    }\n                } else {\n                    var contentDrawView = nowcontext.document.contentDrawView()||nowcontext.document.currentView();\n                    var midX = parseInt(Math.round((contentDrawView.frame().size.width / 2 - contentDrawView.horizontalRuler().baseLine()) / contentDrawView.zoomValue()));\n                    var midY = parseInt(Math.round((contentDrawView.frame().size.height / 2 - contentDrawView.verticalRuler().baseLine()) / contentDrawView.zoomValue()));\n                    var x = parseInt(midX - data.width / 2);\n                    var y = parseInt(midY - data.height / 2);\n                    svgFrame.setX(x);\n                    svgFrame.setY(y);\n                    nowcontext.document.showMessage(i18.m2);\n                }\n                importedSVGLayer.select_byExpandingSelection(true, true);\n                if (ga) {                    \n                    if (data.type == 'public') {\n                        ga.sendEvent('icon', 'public');\n                    }else{\n                        ga.sendEvent('icon', 'private');                        \n                    }\n                }\n            } else if (data.type == 'loginout') {\n                NSUserDefaults.standardUserDefaults().setObject_forKey('', loginNameKey);\n                NSUserDefaults.standardUserDefaults().setObject_forKey('', loginKey);\n                NSUserDefaults.standardUserDefaults().setObject_forKey('', categoryChooseKey);\n                NSUserDefaults.standardUserDefaults().setObject_forKey('', projectChooseKey);\n            } else if (data.type == 'code') {\n                paste(data.code);\n                errorDialog(context,i18.m17 + data.code + i18.m18);\n            } else if (data.type == 'share') {\n                var d = downloadZip(data);\n                var address = 'http://sketch.weapi.io:3000/users/downloadZip?' + 'svgname=' + d.data.svgZipName + '&' + 'pngname=' + d.data.pngZipName + '&' + 'remark=' + (data.message);\n                paste(address);\n                errorDialog(context,i18.m19 + address + i18.m18);\n            } else if (data.type == 'displayDialog') {\n                errorDialog(context,data.data);\n            }\n        },\n        loginCallback: function (data, windowObject) {\n            var result;\n            if (data.action == 'login') {\n                result = iconLogin(data);\n            } else if (data.action == 'register') {\n                result = iconRegister(data);\n            } else if (data.action == 'addProject') {\n                if (data.projectName == '') {\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                    return errorDialog(context,i18.m20);\n                } else {\n                    result = addProject(data);\n                    if (result.status == 200) {\n                        errorDialog(context,i18.m21);\n                    }\n                }\n            } else if (data.action == 'addCategory') {\n                if (data.categoryName == '') {\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                    return errorDialog(context,i18.m20);\n                } else {\n                    result = addCategory(data);\n                    if (result.status == 200) {\n                        errorDialog(context,i18.m21);\n                    }\n                }\n            } else if (data.action == 'addMember') {\n                if (data.invitedKey == '') {\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                    return errorDialog(context,i18.m20);\n                } else {\n                    result = addMember(data);\n                    if (result.status == 200) {\n                        errorDialog(context,i18.m21);\n                    }\n                }\n            } else if (data.action == 'deleteProject') {\n                var settingsWindow = dialog(context);\n                settingsWindow.addButtonWithTitle(i18.m28);\n                settingsWindow.addButtonWithTitle(i18.m29);\n\n                settingsWindow.setMessageText(i18.m67);\n                settingsWindow.setInformativeText(i18.m69);\n\n                if (settingsWindow.runModal() == \"1000\") {\n                    var result = deleteProject(data);\n                    if (result.status == 200) {\n                        errorDialog(context,i18.m68);\n                    }\n                } else {\n                    return;\n                }\n            }\n            if (result.status == 200) {\n                if (result.sig) {\n                    NSUserDefaults.standardUserDefaults().setObject_forKey(result.sig, loginKey);\n                    var username = NSUserDefaults.standardUserDefaults().objectForKey(loginNameKey);\n                    var b = '';\n                    b += username;\n                    result.nametest = b;\n                }\n                var project = queryProject().list;\n                result.project = project;\n                windowObject.evaluateWebScript(\"sLogin(\" + JSON.stringify(result) + \")\");\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            } else {\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            }\n        },\n        pushdataCallback: function (data, windowObject) {\n            if (data.action == 'boardsvg') {\n                var newContext = uploadContext(context);\n                if (newContext.selection.length == 0) {\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                    return errorDialog(context,i18.m22);\n                }\n                var svg = choiceSVG(newContext);\n                var namelist = [];\n                for (var i = 0; i < svg.length; i++) {\n                    namelist.push(svg[i].name);\n                }\n                var version = version_check({\n                    projectid: data.projectid,\n                    list: namelist\n                }).list;\n\n                for (var i = 0; i < version.length; i++) {\n                    svg[i].version = version[i].version;\n                }\n\n                windowObject.evaluateWebScript(\"boardsvg(\" + JSON.stringify(svg) + \")\");\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            } else if (data.action == 'filesvg') {\n                var panel = NSOpenPanel.openPanel();\n                panel.setCanChooseDirectories(false);\n                panel.setAllowsMultipleSelection(true);\n                panel.setAllowedFileTypes([\"svg\"]);\n                panel.setAllowsOtherFileTypes(false);\n                panel.setExtensionHidden(false);\n                var clicked = panel.runModal();\n                if (clicked != NSFileHandlingPanelOKButton) {\n                    return;\n                }\n                var urls = panel.URLs();\n                var svg = [];\n                for (var i = 0; i < urls.length; i++) {\n                    var unformattedURL = NSString.stringWithFormat(urls[i]);\n                    var file_path = unformattedURL.stringByRemovingPercentEncoding();\n                    var theResponseData = request(file_path)\n                    var theText = NSString.alloc().initWithData_encoding(theResponseData,NSUTF8StringEncoding);\n\n                    svg.push({\n                        content: encodeURIComponent(theText),\n                        name: file_path.substr(file_path.lastIndexOf('/') + 1).replace('.svg', '')\n                    })\n                }\n                var namelist = [];\n                for (var i = 0; i < svg.length; i++) {\n                    namelist.push(svg[i].name);\n                }\n                var version = version_check({\n                    projectid: data.projectid,\n                    list: namelist\n                }).list;\n                for (var i = 0; i < version.length; i++) {\n                    svg[i].version = version[i].version;\n                }\n\n                windowObject.evaluateWebScript(\"filesvg(\" + JSON.stringify(svg) + \")\");\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            } else if (data.action == 'version') {\n                var version = version_check(data);\n                windowObject.evaluateWebScript(\"versionCheck(\" + JSON.stringify(version.list) + \")\");\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n\n            } else if (data.action == 'upload') {\n                function upload(uploaddata) {\n                    for (var i = 0; i < uploaddata.length; i++) {\n                        uploaddata[i].name = encodeURIComponent(uploaddata[i].name);\n                        uploaddata[i].content = encodeURIComponent(uploaddata[i].content);\n                    }\n                    var result = uploadIconsFunc(uploaddata);\n                    if (result.status == 200) {\n                        errorDialog(context,i18.m23);\n                    }\n                    return result;\n                }\n                if (data.version > 0) {\n                    var settingsWindow = dialog(context);\n                    settingsWindow.addButtonWithTitle(i18.m24);\n                    settingsWindow.addButtonWithTitle(i18.m25);\n                    settingsWindow.setMessageText(i18.m26);\n                    settingsWindow.addTextLabelWithValue(data.version + i18.m27);\n                    var runModals = settingsWindow.runModal();\n                    if (runModals == '1000') {\n                        var uploadReturn = upload(data.data);\n                        windowObject.evaluateWebScript(\"uploadReturn(\" + JSON.stringify(uploadReturn) + \")\");\n                        windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                    }\n                } else {\n                    var uploadReturn = upload(data.data);\n                    windowObject.evaluateWebScript(\"uploadReturn(\" + JSON.stringify(uploadReturn) + \")\");\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                }\n            } else if (data.action == 'history') {\n                var result = queryIconByName(data);\n                windowObject.evaluateWebScript(\"pushdata3(\" + JSON.stringify(result) + \")\");\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n\n            } else if (data.action == 'delete') {\n                var settingsWindow = dialog(context);\n                settingsWindow.addButtonWithTitle(i18.m28);\n                settingsWindow.addButtonWithTitle(i18.m29);\n                settingsWindow.setMessageText(i18.m30);\n\n                var response = settingsWindow.runModal();\n                if (response == \"1000\") {\n                    deleteIcon(data.deleteid);\n                    var result = queryProjectIcon(data.projectid);\n                    windowObject.evaluateWebScript(\"pushdata(\" + JSON.stringify(result) + \")\");\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                }\n            } else {\n                var result = {};\n                if (data.type == 'type') {\n                    result = queryTypeIcon(data.id);\n                    NSUserDefaults.standardUserDefaults().setObject_forKey(data.pid, categoryChooseKey);\n                    NSUserDefaults.standardUserDefaults().setObject_forKey(data.id, categoryChooseKey);\n                } else {\n                    result = queryProjectIcon(data.id);\n                    NSUserDefaults.standardUserDefaults().setObject_forKey('', categoryChooseKey);\n                    NSUserDefaults.standardUserDefaults().setObject_forKey(data.id, projectChooseKey);\n                }\n                windowObject.evaluateWebScript(\"pushdata(\" + JSON.stringify(result) + \")\");\n                windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            }\n\n        }\n    });\n    if (ga) ga.sendEvent('icon', 'open');\n}\n\nexport function iconQRun(context) {\n    iconQ(context);\n}"],"sourceRoot":""}