{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/colorReplace.js","webpack://exports/./src/common.js"],"names":["colorReplace","context","i18","_","selection","document","currentPage","layerCount","count","selectedLayer","colorToFind","colorToFind2","colorToReplace","searchScope","replaceElementType","replaceCount","replaceElementTypeAll","userInterface","findedColorWell","replaceColorWell","selectedLayerType","getSelectedLayer","firstObject","class","getColour","undefined","getboderColor","createUserInterface","processButtonClick","doFindAndReplace","hexToRgb","hex","result","exec","r","parseInt","g","b","layer","colour","fill","textColor","style","enabledFills","lastObject","isEnabled","color","immutableModelObject","border","borders","setColour","setColor","hexColour","MSColor","colorWithRed_green_blue_alpha","setBorderColor","layerColour","borderColour","hexValue","hexBorderColour","setTextColor","textcolor","MSImmutableColor","MSLayerGroup","layers","dialog","setMessageText","m1","addTextLabelWithValue","m2","NSColorWell","alloc","initWithFrame","NSMakeRect","findedColorHex","findedColorAlpha","findedMSColor","colorWithSVGString","setAlpha","findedColor","NSColorWithColorSpace","NSColorSpace","deviceRGBColorSpace","findedColorView","NSView","addSubview","addAccessoryView","m3","replaceColorHex","replaceColorAlpha","replaceMSColor","replaceColor","replaceColorView","m4","options","m5","m6","createRadioButtons","m7","options2","m8","m9","addButtonWithTitle","m10","m11","runModal","colorWithNSColor","svgRepresentation","viewAtIndex","selectedCell","tag","searchInLayer","layerType","MSTextLayer","MSShapeGroup","MSDocument","documentPages","pages","i","documentPage","objectAtIndex","MSPage","MSArtboardGroup","MSSymbolMaster","sublayers","sublayer","showMessage","ga","Analytics","sendEvent","colorReplaceAction","kPluginDomain","iconQueryUrl","loginKey","i18nKey","lang","NSUserDefaults","standardUserDefaults","objectForKey","macOSVersion","NSDictionary","dictionaryWithContentsOfFile","split","slice","join","indexOf","setObject_forKey","encodeURIComponent","toString","length","get_","json","manifestPath","plugin","url","URLByAppendingPathComponent","path","jsonData","NSData","dataWithContentsOfFile","NSString","initWithData_encoding","NSUTF8StringEncoding","JSON","parse","i18Content","iconImage","NSImage","initByReferencingFile","urlForResourceNamed","alert","COSAlertWindow","new","setIcon","errorDialog","content","checkForUpdate","setInformativeText","initDefaults","pluginDomain","initialValues","defaults","defaultValues","dVal","key","nil","uploadContext","contextNow","NSDocumentController","sharedDocumentController","currentDocument","selectedLayers","paste","text","pasteBoard","NSPasteboard","generalPasteboard","declareTypes_owner","NSArray","arrayWithObject","NSPasteboardTypeString","setString_forType","rgb","a","sColor","toLowerCase","sColorNew","concat","sColorChange","push","saveDefaults","newValues","request","args","aara","task","NSTask","init","setLaunchPath","setArguments","outputPipe","NSPipe","pipe","setStandardOutput","launch","responseData","fileHandleForReading","readDataToEndOfFile","networkRequest","zip","encodeData","o","get","sig","returnData","status","msg","post","getConfig","NSJSONSerialization","JSONObjectWithData_options_error","NSJSONReadingMutableContainers","openUrlInBrowser","NSWorkspace","sharedWorkspace","openURL","NSURL","URLWithString","selectedItem","ui","NSRadioButton","type","NSRadioModeMatrix","rows","Math","ceil","columns","selectedRow","floor","selectedColumn","buttonCell","NSButtonCell","setButtonType","buttonMatrix","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","setCellSize","NSMakeSize","cells","setTitle","setTag","setTransparent","setEnabled","selectCellAtRow_column","createRadioButtons2","createArtboard","obj","doc","artboard","setName","name","frame","setX","x","setY","y","setWidth","width","setHeight","height","addLayer","unique","res","len","item","j","jLen","MochaJSDelegate","selectorHandlerDict","uniqueClassName","NSUUID","UUID","UUIDString","delegateClassDesc","MOClassDescription","allocateDescriptionForClassWithName_superclass_","NSObject","registerClass","handlers","setHandlerForSelector","selectorString","func","handlerHasBeenSet","selector","NSSelectorFromString","dynamicHandler","functionToCall","apply","arguments","regex","match","dynamicFunction","eval","addInstanceMethodWithSelector_function_","removeHandlerForSelector","getHandlerForSelector","getAllHandlers","getClass","NSClassFromString","getClassInstance","SMPanel","coscript","setShouldKeepAround","self","encodeURI","titleBgColor","NSColor","contentBgColor","identifier","threadDictionary","NSThread","mainThread","Panel","NSPanel","setTitleVisibility","NSWindowTitleHidden","setTitlebarAppearsTransparent","standardWindowButton","NSWindowCloseButton","setHidden","hiddenClose","NSWindowMiniaturizeButton","NSWindowZoomButton","setFrame_display","setBackgroundColor","contentView","webView","WebView","showX","showY","windowObject","windowScriptObject","delegate","webFrame","SMAction","DOMReady","stringify","data","evaluateWebScript","mainFrameURL","fragment","decodeURI","valueForKey","callback","floatWindow","orderOut","NSApp","stopModal","close","removeObjectForKey","closeflag","panel","NSOpenPanel","openPanel","setCanChooseDirectories","setCanCreateDirectories","setAllowedFileTypes","setAllowsOtherFileTypes","setExtensionHidden","clicked","NSFileHandlingPanelOKButton","firstURL","URLs","unformattedURL","stringWithFormat","file_path","stringByRemovingPercentEncoding","loginCallback","pushdataCallback","setWantsLayer","setFrame","setCornerRadius","setMasksToBounds","setFrameLoadDelegate_","setMainFrameURL_","closeButton","setCOSJSTargetFunction","sender","closeCallback","wantsStop","setAction","titlebarView","superview","titlebarViewController","view","titlebarContainerView","setFrameOrigin","NSMakePoint","setFrameSize","becomeKeyWindow","setLevel","NSFloatingWindowLevel","center","makeKeyAndOrderFront","runModalForWindow"],"mappings":"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","file":"colorReplace.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/colorReplace.js\");\n","import {_,dialog,errorDialog,initDefaults,saveDefaults,uploadContext,paste,rgb,request,networkRequest,zip,encodeData,get,post,getConfig,openUrlInBrowser,createRadioButtons,createRadioButtons2,createArtboard,hexToRgb,unique,SMPanel} from \"./common\";\n\nfunction colorReplace(context) {\n  var i18 = _(context).colorReplace;\n\n  var selection = context.selection;\n  var document = context.document;\n  var currentPage = document.currentPage();\n  var layerCount = selection.count();\n  var selectedLayer;\n\n  var colorToFind = '',\n    colorToFind2 = '',\n    colorToReplace = '',\n    searchScope = 0,\n    replaceElementType = 0,\n    replaceCount = 0,\n    replaceElementTypeAll = 0;\n  var userInterface,\n    findedColorWell,\n    replaceColorWell;\n  var selectedLayerType;\n\n  if (layerCount == 0) {\n    colorToFind = colorToFind2 = '';\n  } else {\n    selectedLayer = getSelectedLayer(selection.firstObject());\n    selectedLayerType = selectedLayer.class();\n    colorToFind = colorToFind2 = getColour(selectedLayer);\n    if (colorToFind == undefined) {\n      colorToFind = colorToFind2 = getboderColor(selectedLayer);\n    }\n  }\n  if (createUserInterface(colorToFind) != '1000') {\n    return;\n  } else {\n    processButtonClick();\n\n    doFindAndReplace();\n  }\n\n  function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\n    if (result) {\n      result = {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      };\n    } else {\n      result = null;\n    }\n\n    return result;\n  }\n\n  function getColour(layer) {\n    var colour;\n    var fill;\n    var selectedLayerType = layer.class();\n\n    if (selectedLayerType == 'MSTextLayer') {\n      colour = layer.textColor();\n\n      fill = layer.style().enabledFills().lastObject();\n\n      if (fill != undefined && fill.isEnabled()) {\n        colour = fill.color();\n      }\n    } else if (selectedLayerType == 'MSShapeGroup') {\n      fill = layer.style().enabledFills().lastObject();\n\n      if (fill != undefined && fill.isEnabled()) {\n        colour = fill.color();\n      }\n    } else {\n      return false;\n    }\n\n    if (colour != undefined) {\n      colour = colour.immutableModelObject();\n    }\n    return colour;\n  }\n\n  function getboderColor(layer) {\n    var colour;\n    var fill;\n    var selectedLayerType = layer.class();\n\n\n    border = layer.style().borders().firstObject();\n\n    if (border != undefined && border.isEnabled()) {\n      colour = border.color();\n    } else {\n      return false;\n    }\n    if (colour != undefined) {\n      colour = colour.immutableModelObject();\n    } else {\n      return false;\n    }\n\n    return colour;\n  }\n\n  function setColour(layer, colorToReplace) {\n    function setColor(layer, hexColour) {\n      if (hexColour == colorToFind) {\n        var fill = layer.style().enabledFills().lastObject();\n        if (fill != undefined) {\n          replaceCount++;\n          fill.color = MSColor.colorWithRed_green_blue_alpha(colorToReplace.r / 255, colorToReplace.g / 255, colorToReplace.b / 255, 1.0);\n        }\n      }\n    }\n\n    function setBorderColor(layer, hexColour) {\n      if (hexColour == colorToFind) {\n        var fill = layer.style().borders().firstObject();\n        if (fill != undefined) {\n          replaceCount++;\n          fill.color = MSColor.colorWithRed_green_blue_alpha(colorToReplace.r / 255, colorToReplace.g / 255, colorToReplace.b / 255, 1.0);\n        }\n      }\n    }\n    var layerColour = getColour(layer);\n    var borderColour = getboderColor(layer);\n    if (!layerColour && !borderColour) {\n      return;\n    } else if (layerColour && borderColour) {\n      var hexColour = '#' + layerColour.hexValue();\n      var hexBorderColour = '#' + borderColour.hexValue();\n      setColor(layer, hexColour);\n      setBorderColor(layer, hexBorderColour);\n    } else if (layerColour) {\n      var hexColour = '#' + layerColour.hexValue();\n      setColor(layer, hexColour);\n    } else if (borderColour) {\n      var hexBorderColour = '#' + borderColour.hexValue();\n      setBorderColor(layer, hexBorderColour);\n    }\n  }\n\n  function setTextColor(layer, colorToReplace) {\n    var textcolor = layer.textColor();\n    var fill = layer.style().enabledFills().lastObject();\n    if (fill != undefined && fill.isEnabled()) {\n      textcolor = fill.color();\n    }\n    if (textcolor != undefined) {\n      textcolor = textcolor.immutableModelObject();\n    }\n    if ('#' + textcolor.hexValue() == colorToFind) {\n      replaceCount++;\n      layer.textColor = MSImmutableColor.colorWithRed_green_blue_alpha(colorToReplace.r / 255, colorToReplace.g / 255, colorToReplace.b / 255, 1.0);\n    }\n  }\n\n  function getSelectedLayer(selectedLayer) {\n    var selectedLayerType = selectedLayer.class();\n\n    if (selectedLayerType == MSLayerGroup) {\n      return getSelectedLayer(selectedLayer.layers().firstObject());\n    } else {\n      return selectedLayer;\n    }\n  }\n\n  function createUserInterface(colorToFind) {\n    userInterface = dialog(context); // 创建弹框\n\n    userInterface.setMessageText(i18.m1);\n\n    userInterface.addTextLabelWithValue(i18.m2 + \"：\");\n    findedColorWell = NSColorWell.alloc().initWithFrame(NSMakeRect(0, 0, 50, 25));\n    var findedColorHex = colorToFind ? '#' + colorToFind.hexValue() : \"#1AAD19\";\n    var findedColorAlpha = 1;\n    var findedMSColor = MSImmutableColor.colorWithSVGString(findedColorHex);\n    findedMSColor.setAlpha(findedColorAlpha);\n    var findedColor = findedMSColor.NSColorWithColorSpace(NSColorSpace.deviceRGBColorSpace());\n    findedColorWell.setColor(findedColor);\n    var findedColorView = NSView.alloc().initWithFrame(NSMakeRect(0, 0, 50, 25)); // 创建包含被选择颜色控件的容器\n    findedColorView.addSubview(findedColorWell);\n    userInterface.addAccessoryView(findedColorView);\n\n    userInterface.addTextLabelWithValue(i18.m3 + \"：\");\n    replaceColorWell = NSColorWell.alloc().initWithFrame(NSMakeRect(0, 0, 50, 25));\n    var replaceColorHex = colorToFind ? '#' + colorToFind.hexValue() : \"#1AAD19\"; // #1AAD19 同设置中的默认值\n    var replaceColorAlpha = 1;\n    var replaceMSColor = MSImmutableColor.colorWithSVGString(replaceColorHex);\n    replaceMSColor.setAlpha(replaceColorAlpha);\n    var replaceColor = replaceMSColor.NSColorWithColorSpace(NSColorSpace.deviceRGBColorSpace());\n    replaceColorWell.setColor(replaceColor);\n    var replaceColorView = NSView.alloc().initWithFrame(NSMakeRect(0, 0, 50, 25)); // 创建包含要替换颜色控件的容器\n    replaceColorView.addSubview(replaceColorWell);\n    userInterface.addAccessoryView(replaceColorView);\n\n    userInterface.addTextLabelWithValue(i18.m4 + \"：\");\n    var options = [i18.m5, i18.m6];\n    userInterface.addAccessoryView(createRadioButtons(options, options[0]));\n\n    if (selectedLayerType) {\n      userInterface.addTextLabelWithValue(i18.m7 + \"：\");\n      var options2 = [i18.m8, i18.m9];\n      userInterface.addAccessoryView(createRadioButtons(options2, 0));\n    }\n\n    userInterface.addButtonWithTitle(i18.m10);\n    userInterface.addButtonWithTitle(i18.m11);\n\n    return userInterface.runModal();\n  }\n\n  function processButtonClick() {\n    colorToFind = colorToFind2 = MSColor.colorWithNSColor(findedColorWell.color()).immutableModelObject().svgRepresentation();\n    colorToReplace = hexToRgb(MSColor.colorWithNSColor(replaceColorWell.color()).immutableModelObject().svgRepresentation());\n    searchScope = userInterface.viewAtIndex(5).selectedCell().tag();\n    if (replaceElementType) {\n      replaceElementTypeAll = userInterface.viewAtIndex(7).selectedCell().tag();\n    }\n  }\n\n  function doFindAndReplace() {\n    switch (searchScope) {\n      case 0:\n        searchInLayer(document);\n        break;\n      case 1:\n        searchInLayer(currentPage);\n        break;\n    }\n  }\n\n  function searchInLayer(layer) {\n    var layerType = layer.class();\n\n    switch (layerType) {\n      case MSTextLayer:\n        if (selectedLayerType == undefined || layerType == selectedLayerType || replaceElementTypeAll == 1) {\n          setTextColor(layer, colorToReplace);\n        }\n        break;\n      case MSShapeGroup:\n        if (selectedLayerType == undefined || layerType == selectedLayerType || replaceElementTypeAll == 1) {\n          setColour(layer, colorToReplace);\n        }\n        break;\n      case MSDocument:\n        var documentPages = layer.pages();\n        for (var i = 0; i < documentPages.count(); i++) {\n          var documentPage = documentPages.objectAtIndex(i);\n          searchInLayer(documentPage);\n        }\n        break;\n      case MSPage:\n      case MSLayerGroup:\n      case MSArtboardGroup:\n      case MSSymbolMaster:\n        var sublayers = layer.layers();\n        for (var i = 0; i < sublayers.count(); i++) {\n          var sublayer = sublayers.objectAtIndex(i);\n          searchInLayer(sublayer);\n        }\n        break;\n    }\n  }\n\n  if (replaceCount) {\n    context.document.showMessage('替换成功，共找到' + replaceCount + '处');\n  } else {\n    context.document.showMessage('没有找到需要替换的颜色');\n  }\n  var ga = new Analytics(context);\n  if (ga) ga.sendEvent('colorReplace', 'open');\n}\n\nexport function colorReplaceAction(context) {\n  colorReplace(context);\n}\n","var kPluginDomain;\nvar iconQueryUrl = 'http://123.207.94.56:3000';\nvar loginKey = \"com.sketchplugins.wechat.iconLogin\";\n\nexport function _(context) {\n    var i18nKey = \"com.sketchplugins.wechat.i18n\";\n    var lang = NSUserDefaults.standardUserDefaults().objectForKey(i18nKey);\n    if (lang == undefined) {\n        var macOSVersion = NSDictionary.dictionaryWithContentsOfFile(\"/System/Library/CoreServices/SystemVersion.plist\").objectForKey(\"ProductVersion\") + \"\";\n        lang = NSUserDefaults.standardUserDefaults().objectForKey(\"AppleLanguages\").objectAtIndex(0);\n        lang = (macOSVersion >= \"10.12\") ? lang.split(\"-\").slice(0, -1).join(\"-\") : lang;\n        if (lang.indexOf('zh') > -1) {\n            lang = 'zhCN';\n        } else {\n            lang = 'enUS';\n        }\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n    if (encodeURIComponent(lang.toString()).length != 4) {\n        lang = 'enUS';\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n\n    function get_(json, context) {\n        var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Resources\").URLByAppendingPathComponent(\"i18n\").URLByAppendingPathComponent(json + \".json\").path();\n        var jsonData = NSData.dataWithContentsOfFile(manifestPath);\n        jsonData = NSString.alloc().initWithData_encoding(jsonData,NSUTF8StringEncoding);\n        return JSON.parse(jsonData);\n    }\n    var i18Content = {};\n    i18Content = get_(lang, context);\n\n    return i18Content;\n};\n\nexport function dialog(context) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    return alert;\n}\n\nexport function errorDialog(context,content) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    alert.addButtonWithTitle(_(context).checkForUpdate.m9);\n\n    alert.setMessageText(_(context).checkForUpdate.m10);\n    alert.setInformativeText(content);\n    return alert.runModal();\n}\n\nexport function initDefaults(pluginDomain, initialValues) {\n    kPluginDomain = pluginDomain;\n\n    var defaults = NSUserDefaults.standardUserDefaults().objectForKey(kPluginDomain);\n    var defaultValues = {};\n    var dVal;\n\n    for (var key in defaults) {\n        defaultValues[key] = defaults[key]\n    }\n\n    for (var key in initialValues) {\n        dVal = defaultValues[key]\n        if (dVal == nil) defaultValues[key] = initialValues[key]\n    }\n    return defaultValues;\n}\n\nexport function uploadContext(context) {\n    var contextNow = context;\n    contextNow.document = NSDocumentController.sharedDocumentController().currentDocument();\n    contextNow.selection = context.document.selectedLayers().layers();\n    return contextNow;\n}\n\nexport function paste(text) {\n    var pasteBoard = NSPasteboard.generalPasteboard();\n    pasteBoard.declareTypes_owner(NSArray.arrayWithObject(NSPasteboardTypeString),nil);\n    pasteBoard.setString_forType(text,NSPasteboardTypeString);\n}\n\nexport function rgb(a) {\n    var sColor = a.toLowerCase();\n    if (sColor.length === 4) {\n        var sColorNew = \"#\";\n        for (var i = 1; i < 4; i += 1) {\n            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n        }\n        sColor = sColorNew;\n    }\n    //处理六位的颜色值\n    var sColorChange = [];\n    for (var i = 1; i < 7; i += 2) {\n        sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n    }\n    return sColorChange;\n}\n\nexport function saveDefaults(newValues) {\n    \n}\n\nexport function request(args) {\n    var aara = [args];\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(aara);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\nexport function networkRequest(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\n// zip(['-q','-r','-m','-o','-j','/Users/liuxinyu/Desktop/123.zip','/Users/liuxinyu/Desktop/123'])\nexport function zip(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/zip\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n}\n\nexport function encodeData(jsonData) {\n    var result = {};\n    for (var o in jsonData) {\n        result[o] = typeof jsonData != 'object' ? encodeURIComponent(jsonData[o]) : encodeData(jsonData[o]);\n    }\n    return result;\n}\n\nexport function get(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest([iconQueryUrl + args[0] + '?sig=' + sig + '&' + args[1]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function post(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest(['-d', 'sig=' + sig + '&' + args[1], iconQueryUrl + args[0]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function getConfig(json, context) {\n    var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(json + \".json\").path();\n    return NSJSONSerialization.JSONObjectWithData_options_error(NSData.dataWithContentsOfFile(manifestPath), NSJSONReadingMutableContainers, nil);\n}\n\nexport function openUrlInBrowser(url) {\n    NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(url));\n}\n\nexport function createRadioButtons(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 2);\n    var columns = ((options.length < 2) ? 1 : 2);\n\n    var selectedRow = Math.floor(selectedItem / 2);\n    var selectedColumn = selectedItem - (selectedRow * 2);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(140, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createRadioButtons2(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 3);\n    var columns = 3;\n\n    var selectedRow = Math.floor(selectedItem / 3);\n    var selectedColumn = selectedItem - (selectedRow * 3);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(90, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createArtboard(context, obj) {\n    var doc = context.document;\n\n    var artboard = new MSArtboardGroup();\n\n    artboard.setName(obj.name);\n\n    var frame = artboard.frame();\n\n    frame.setX(obj.x);\n    frame.setY(obj.y);\n    frame.setWidth(obj.width);\n    frame.setHeight(obj.height);\n    doc.currentPage().addLayer(artboard);\n\n    return artboard;\n}\n\nexport function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (result) {\n        result = {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n        };\n    } else {\n        result = null;\n    }\n    return result;\n}\n\nexport function unique(a) {\n    var res = [];\n\n    for (var i = 0, len = a.length; i < len; i++) {\n        var item = a[i];\n\n        for (var j = 0, jLen = res.length; j < jLen; j++) {\n            if (res[j] === item)\n                break;\n        }\n\n        if (j === jLen)\n            res.push(item);\n    }\n\n    return res;\n}\n\n\nfunction MochaJSDelegate(selectorHandlerDict) {\n    var uniqueClassName = \"MochaJSDelegate_DynamicClass_\" + NSUUID.UUID().UUIDString();\n\n    var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName, NSObject);\n\n    delegateClassDesc.registerClass();\n\n    //  Handler storage\n\n    var handlers = {};\n\n    //  Define interface\n\n    this.setHandlerForSelector = function (selectorString, func) {\n        var handlerHasBeenSet = (selectorString in handlers);\n        var selector = NSSelectorFromString(selectorString);\n\n        handlers[selectorString] = func;\n\n        if (!handlerHasBeenSet) {\n            /*\n                For some reason, Mocha acts weird about arguments:\n                https://github.com/logancollins/Mocha/issues/28\n\n                We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n            */\n\n            var dynamicHandler = function () {\n                var functionToCall = handlers[selectorString];\n\n                if (!functionToCall) return;\n\n                return functionToCall.apply(delegateClassDesc, arguments);\n            };\n\n            var args = [],\n                regex = /:/g;\n            while (match = regex.exec(selectorString)) args.push(\"arg\" + args.length);\n\n            dynamicFunction = eval(\"(function(\" + args.join(\",\") + \"){ return dynamicHandler.apply(this, arguments); })\");\n\n            delegateClassDesc.addInstanceMethodWithSelector_function_(selector, dynamicFunction);\n        }\n    };\n\n    this.removeHandlerForSelector = function (selectorString) {\n        delete handlers[selectorString];\n    };\n\n    this.getHandlerForSelector = function (selectorString) {\n        return handlers[selectorString];\n    };\n\n    this.getAllHandlers = function () {\n        return handlers;\n    };\n\n    this.getClass = function () {\n        return NSClassFromString(uniqueClassName);\n    };\n\n    this.getClassInstance = function () {\n        return NSClassFromString(uniqueClassName).new();\n    };\n\n    //  Conveience\n\n    if (typeof selectorHandlerDict == \"object\") {\n        for (var selectorString in selectorHandlerDict) {\n            this.setHandlerForSelector(selectorString, selectorHandlerDict[selectorString]);\n        }\n    }\n};\n\n\n//  sketch-measure\n//  common.js\n//  github https://github.com/utom/sketch-measure\n//  Created by utom\n\nexport function SMPanel(options) {\n    coscript.setShouldKeepAround(true);\n    var self = this,\n        result = false;\n    options.url = encodeURI(\"file://\" + options.url);\n    var frame = NSMakeRect(0, 0, options.width, (options.height + 32)),\n        titleBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1),\n        contentBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1);\n\n    if (options.identifier) {\n        var threadDictionary = NSThread.mainThread().threadDictionary();\n        if (threadDictionary[options.identifier]) {\n            return false;\n        }\n    }\n\n    var Panel = NSPanel.alloc().init();\n    Panel.setTitleVisibility(NSWindowTitleHidden);\n    Panel.setTitlebarAppearsTransparent(true);\n    Panel.standardWindowButton(NSWindowCloseButton).setHidden(options.hiddenClose);\n    Panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n    Panel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n    Panel.setFrame_display(frame, false);\n    Panel.setBackgroundColor(contentBgColor);\n\n    var contentView = Panel.contentView();\n    var webView = WebView.alloc().initWithFrame(NSMakeRect(options.showX ? options.showX : 0, options.showY ? options.showY : 0, options.width, options.height));\n    var windowObject = webView.windowScriptObject(),\n        delegate = new MochaJSDelegate({\n            \"webView:didFinishLoadForFrame:\": (function (webView, webFrame) {\n                var SMAction = [\n                        \"function SMAction(hash, data){\",\n                        \"if(data){\",\n                        \"window.SMData = encodeURI(JSON.stringify(data));\",\n                        \"}\",\n                        \"window.location.hash = hash;\",\n                        \"}\"\n                    ].join(\"\"),\n                    DOMReady = [\n                        \"$(\",\n                        \"function(){\",\n                        \"init(\" + JSON.stringify(options.data) + \")\",\n                        \"}\",\n                        \");\"\n                    ].join(\"\");\n\n                windowObject.evaluateWebScript(SMAction);\n                windowObject.evaluateWebScript(DOMReady);\n            }),\n            \"webView:didChangeLocationWithinPageForFrame:\": (function (webView, webFrame) {\n                var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n                if (request == \"submit\") {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.callback(data);\n                    result = true;\n                } else if (request == \"close\") {\n                    if (!options.floatWindow) {\n                        Panel.orderOut(nil);\n                        NSApp.stopModal();\n                    } else {\n                        Panel.close();\n                    }\n                    threadDictionary.removeObjectForKey(options.identifier);\n                } else if (request == 'submitandclose') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    var closeflag = options.callback(data);\n                    result = true;\n                    if (closeflag) {\n                        if (!options.floatWindow) {\n                            Panel.orderOut(nil);\n                            NSApp.stopModal();\n                        } else {\n                            Panel.close();\n                        }\n                        threadDictionary.removeObjectForKey(options.identifier);\n                    }\n                } else if (request == 'file') {\n                    var panel = NSOpenPanel.openPanel();\n                    panel.setCanChooseDirectories(false);\n                    panel.setCanCreateDirectories(false);\n                    panel.setAllowedFileTypes([\"sketch\", \"json\"]);\n                    panel.setAllowsOtherFileTypes(false);\n                    panel.setExtensionHidden(false);\n                    var clicked = panel.runModal();\n                    if (clicked != NSFileHandlingPanelOKButton) {\n                        windowObject.evaluateWebScript(\"inputFile('\" + '' + \"')\");\n                        return;\n                    }\n                    var firstURL = panel.URLs().objectAtIndex(0);\n                    var unformattedURL = NSString.stringWithFormat(firstURL);\n                    var file_path = unformattedURL.stringByRemovingPercentEncoding();\n                    windowObject.evaluateWebScript(\"inputFile('\" + file_path + \"')\");\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                } else if (request == 'login') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.loginCallback(data, windowObject);\n                } else if (request == 'pushdata') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.pushdataCallback(data, windowObject);\n                }\n                // windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            })\n        });\n\n    contentView.setWantsLayer(true);\n    contentView.layer().setFrame(contentView.frame());\n    contentView.layer().setCornerRadius(6);\n    contentView.layer().setMasksToBounds(true);\n\n    webView.setBackgroundColor(contentBgColor);\n    webView.setFrameLoadDelegate_(delegate.getClassInstance());\n    webView.setMainFrameURL_(options.url);\n\n    contentView.addSubview(webView);\n\n    var closeButton = Panel.standardWindowButton(NSWindowCloseButton);\n    closeButton.setCOSJSTargetFunction(function (sender) {\n        var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n        if (options.closeCallback) {\n            options.closeCallback();\n        }\n\n        if (options.identifier) {\n            threadDictionary.removeObjectForKey(options.identifier);\n        }\n\n        self.wantsStop = true;\n        if (options.floatWindow) {\n            Panel.close();\n        } else {\n            Panel.orderOut(nil);\n            NSApp.stopModal();\n        }\n\n    });\n    closeButton.setAction(\"callAction:\");\n\n    var titlebarView = contentView.superview().titlebarViewController().view(),\n        titlebarContainerView = titlebarView.superview();\n    closeButton.setFrameOrigin(NSMakePoint(8, 8));\n    titlebarContainerView.setFrame(NSMakeRect(0, options.height, options.width, 32));\n    titlebarView.setFrameSize(NSMakeSize(options.width, 32));\n    titlebarView.setTransparent(true);\n    titlebarView.setBackgroundColor(titleBgColor);\n    titlebarContainerView.superview().setBackgroundColor(titleBgColor);\n\n    if (options.floatWindow) {\n        Panel.becomeKeyWindow();\n        Panel.setLevel(NSFloatingWindowLevel);\n        if (!options.showX || !options.showY) {\n            Panel.center();\n        }\n        Panel.makeKeyAndOrderFront(nil);\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        return webView;\n    } else {\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        NSApp.runModalForWindow(Panel);\n    }\n\n    return windowObject;\n}"],"sourceRoot":""}