{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/codeStyle.js","webpack://exports/./src/common.js"],"names":["codeS","context","i18","_","codeStyle","codeKey","Rate","keyCode","BorderPositions","FillTypes","GradientTypes","ShadowTypes","TextAligns","ResizingType","shadowToJSON","shadow","type","MSStyleShadow","offsetX","offsetY","blurRadius","spread","color","colorToJSON","pointToJSON","point","x","parseFloat","y","colorStopToJSON","colorStop","position","gradientToJSON","gradient","stopsData","stop","stopIter","stops","objectEnumerator","nextObject","push","gradientType","from","to","colorStops","getRadius","layer","returnFlag","layers","firstObject","fixedRadius","e","getBorders","style","bordersData","border","borderIter","borders","isEnabled","fillType","borderData","thickness","getFills","fillsData","fill","fillIter","fills","fillData","getShadows","shadowsData","shadowIter","shadows","innerShadows","getCode","selection","text","class","exportText","exportSize","paste","obj","r","Math","round","red","g","green","b","blue","a","alpha","bzone","d","length","toString","toFixed","layerStyle","returnText","getShadow","shadowText","i","contextSettings","opacity","fontSize","lineHeight","font","defaultLineHeightForFont","textColor","fontName","toLocaleUpperCase","indexOf","join","backgroundColor","getBorder","borderless","rateX","width","rect","size","height","bzone6","z","param","atan","abs","PI","NSUserDefaults","standardUserDefaults","objectForKey","count","document","showMessage","m1","m2","artboard","parentArtboard","m4","absoluteRect","m3","ga","Analytics","sendEvent","onRun","kPluginDomain","iconQueryUrl","loginKey","i18nKey","lang","undefined","macOSVersion","NSDictionary","dictionaryWithContentsOfFile","objectAtIndex","split","slice","setObject_forKey","encodeURIComponent","get_","json","manifestPath","plugin","url","URLByAppendingPathComponent","path","jsonData","NSData","dataWithContentsOfFile","NSString","alloc","initWithData_encoding","NSUTF8StringEncoding","JSON","parse","i18Content","dialog","iconImage","NSImage","initByReferencingFile","urlForResourceNamed","alert","COSAlertWindow","new","setIcon","errorDialog","content","addButtonWithTitle","checkForUpdate","m9","setMessageText","m10","setInformativeText","runModal","initDefaults","pluginDomain","initialValues","defaults","defaultValues","dVal","key","nil","uploadContext","contextNow","NSDocumentController","sharedDocumentController","currentDocument","selectedLayers","pasteBoard","NSPasteboard","generalPasteboard","declareTypes_owner","NSArray","arrayWithObject","NSPasteboardTypeString","setString_forType","rgb","sColor","toLowerCase","sColorNew","concat","sColorChange","parseInt","saveDefaults","newValues","request","args","aara","task","NSTask","init","setLaunchPath","setArguments","outputPipe","NSPipe","pipe","setStandardOutput","launch","responseData","fileHandleForReading","readDataToEndOfFile","networkRequest","zip","encodeData","result","o","get","sig","returnData","status","msg","post","getConfig","NSJSONSerialization","JSONObjectWithData_options_error","NSJSONReadingMutableContainers","openUrlInBrowser","NSWorkspace","sharedWorkspace","openURL","NSURL","URLWithString","createRadioButtons","options","selectedItem","ui","NSRadioButton","NSRadioModeMatrix","rows","ceil","columns","selectedRow","floor","selectedColumn","buttonCell","NSButtonCell","setButtonType","buttonMatrix","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","NSMakeRect","setCellSize","NSMakeSize","cells","setTitle","setTag","setTransparent","setEnabled","selectCellAtRow_column","createRadioButtons2","createArtboard","doc","MSArtboardGroup","setName","name","frame","setX","setY","setWidth","setHeight","currentPage","addLayer","hexToRgb","hex","exec","unique","res","len","item","j","jLen","MochaJSDelegate","selectorHandlerDict","uniqueClassName","NSUUID","UUID","UUIDString","delegateClassDesc","MOClassDescription","allocateDescriptionForClassWithName_superclass_","NSObject","registerClass","handlers","setHandlerForSelector","selectorString","func","handlerHasBeenSet","selector","NSSelectorFromString","dynamicHandler","functionToCall","apply","arguments","regex","match","dynamicFunction","eval","addInstanceMethodWithSelector_function_","removeHandlerForSelector","getHandlerForSelector","getAllHandlers","getClass","NSClassFromString","getClassInstance","SMPanel","coscript","setShouldKeepAround","self","encodeURI","titleBgColor","NSColor","colorWithRed_green_blue_alpha","contentBgColor","identifier","threadDictionary","NSThread","mainThread","Panel","NSPanel","setTitleVisibility","NSWindowTitleHidden","setTitlebarAppearsTransparent","standardWindowButton","NSWindowCloseButton","setHidden","hiddenClose","NSWindowMiniaturizeButton","NSWindowZoomButton","setFrame_display","setBackgroundColor","contentView","webView","WebView","initWithFrame","showX","showY","windowObject","windowScriptObject","delegate","webFrame","SMAction","DOMReady","stringify","data","evaluateWebScript","mainFrameURL","fragment","decodeURI","valueForKey","callback","floatWindow","orderOut","NSApp","stopModal","close","removeObjectForKey","closeflag","panel","NSOpenPanel","openPanel","setCanChooseDirectories","setCanCreateDirectories","setAllowedFileTypes","setAllowsOtherFileTypes","setExtensionHidden","clicked","NSFileHandlingPanelOKButton","firstURL","URLs","unformattedURL","stringWithFormat","file_path","stringByRemovingPercentEncoding","loginCallback","pushdataCallback","setWantsLayer","setFrame","setCornerRadius","setMasksToBounds","setFrameLoadDelegate_","setMainFrameURL_","addSubview","closeButton","setCOSJSTargetFunction","sender","closeCallback","wantsStop","setAction","titlebarView","superview","titlebarViewController","view","titlebarContainerView","setFrameOrigin","NSMakePoint","setFrameSize","becomeKeyWindow","setLevel","NSFloatingWindowLevel","center","makeKeyAndOrderFront","runModalForWindow"],"mappings":"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","file":"codeStyle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/codeStyle.js\");\n","import {_,dialog,errorDialog,initDefaults,saveDefaults,uploadContext,paste,rgb,request,networkRequest,zip,encodeData,get,post,getConfig,openUrlInBrowser,createRadioButtons,createRadioButtons2,createArtboard,hexToRgb,unique,SMPanel} from \"./common\";\n\n\nfunction codeS(context) {\n    var i18 = _(context).codeStyle;\n\n    var codeKey = \"com.sketchplugins.wechat.codetype\";\n    var Rate = 2;\n    var keyCode = 'px';\n    var BorderPositions = [\"center\", \"inside\", \"outside\"],\n        FillTypes = [\"color\", \"gradient\"],\n        GradientTypes = [\"linear\", \"radial\", \"angular\"],\n        ShadowTypes = [\"outer\", \"inner\"],\n        TextAligns = [\"left\", \"right\", \"center\", \"justify\", \"left\"],\n        ResizingType = [\"stretch\", \"corner\", \"resize\", \"float\"];\n\n    function shadowToJSON(shadow) {\n        return {\n            type: shadow instanceof MSStyleShadow ? \"outer\" : \"inner\",\n            offsetX: shadow.offsetX(),\n            offsetY: shadow.offsetY(),\n            blurRadius: shadow.blurRadius(),\n            spread: shadow.spread(),\n            color: colorToJSON(shadow.color())\n        };\n    }\n\n    function pointToJSON(point) {\n        return {\n            x: parseFloat(point.x),\n            y: parseFloat(point.y)\n        };\n    }\n\n    function colorStopToJSON(colorStop) {\n        return {\n            color: colorToJSON(colorStop.color()),\n            position: colorStop.position()\n        };\n    }\n\n    function gradientToJSON(gradient) {\n        var stopsData = [],\n            stop, stopIter = gradient.stops().objectEnumerator();\n        while (stop = stopIter.nextObject()) {\n            stopsData.push(colorStopToJSON(stop));\n        }\n\n        return {\n            type: GradientTypes[gradient.gradientType()],\n            from: pointToJSON(gradient.from()),\n            to: pointToJSON(gradient.to()),\n            colorStops: stopsData\n        };\n    }\n\n    function getRadius(layer) {\n        var returnFlag = 0;\n        try {\n            return layer.layers().firstObject().fixedRadius();\n        } catch (e) {\n            return 0;\n        }\n    }\n\n    function getBorders(style) {\n        var bordersData = [],\n            border, borderIter = style.borders().objectEnumerator();\n        while (border = borderIter.nextObject()) {\n            if (border.isEnabled()) {\n                var fillType = FillTypes[border.fillType()],\n                    borderData = {\n                        fillType: fillType,\n                        position: BorderPositions[border.position()],\n                        thickness: border.thickness()\n                    };\n\n                switch (fillType) {\n                    case \"color\":\n                        borderData.color = colorToJSON(border.color());\n                        break;\n\n                    case \"gradient\":\n                        borderData.gradient = gradientToJSON(border.gradient());\n                        break;\n\n                    default:\n                        continue;\n                }\n\n                bordersData.push(borderData);\n            }\n        }\n\n        return bordersData;\n    }\n\n    function getFills(style) {\n        var fillsData = [],\n            fill, fillIter = style.fills().objectEnumerator();\n        while (fill = fillIter.nextObject()) {\n            if (fill.isEnabled()) {\n                var fillType = FillTypes[fill.fillType()],\n                    fillData = {\n                        fillType: fillType\n                    };\n\n                switch (fillType) {\n                    case \"color\":\n                        fillData.color = colorToJSON(fill.color());\n                        break;\n\n                    case \"gradient\":\n                        fillData.gradient = gradientToJSON(fill.gradient());\n                        break;\n\n                    default:\n                        continue;\n                }\n\n                fillsData.push(fillData);\n            }\n        }\n\n        return fillsData;\n    }\n\n    function getShadows(style) {\n        var shadowsData = [],\n            shadow, shadowIter = style.shadows().objectEnumerator();\n        while (shadow = shadowIter.nextObject()) {\n            if (shadow.isEnabled()) {\n                shadowsData.push(shadowToJSON(shadow));\n            }\n        }\n\n        shadowIter = style.innerShadows().objectEnumerator();\n        while (shadow = shadowIter.nextObject()) {\n            if (shadow.isEnabled()) {\n                shadowsData.push(shadowToJSON(shadow));\n            }\n        }\n        return shadowsData;\n    }\n\n    function getCode(selection) {\n        var text = '';\n        if (selection.class() == 'MSTextLayer') {\n            text = exportText(selection);\n        } else {\n            text = exportSize(selection);\n        }\n        paste(text);\n    }\n\n    function colorToJSON(color) {\n        var obj = {\n            r: Math.round(color.red() * 255),\n            g: Math.round(color.green() * 255),\n            b: Math.round(color.blue() * 255),\n            a: color.alpha()\n        }\n\n        function bzone(d) {\n            if (d.length == 1) {\n                d = '0' + d;\n            }\n            return d;\n        }\n        if (obj.a == 1) {\n            return '#' + bzone(obj.r.toString(16)) + bzone(obj.g.toString(16)) + bzone(obj.b.toString(16));\n        } else {\n            return 'rgba(' + obj.r + ',' + obj.g + ',' + obj.b + ',' + obj.a.toFixed(2) + ')';\n        }\n    }\n\n    function exportText(selection) {\n        var layerStyle = selection.style();\n        var returnText = [];\n        var getShadow = getShadows(layerStyle);\n        if(getShadow.length > 0){\n            var shadowText = '';\n            for(var i = 0;i < getShadow.length; i++) {\n                if(shadowText != ''){\n                    shadowText += ',\\n';\n                }\n                if(getShadow[i].type != 'inner'){\n                    shadowText += Math.round(getShadow[i].offsetX / Rate) + keyCode + ' ' + Math.round(getShadow[i].offsetY / Rate) + keyCode + ' ' + Math.round(getShadow[i].blurRadius / Rate) + keyCode + ' ' + getShadow[i].color;\n                }\n            }\n            returnText.push('text-shadow: ' + shadowText + ';');\n        }\n\n        if (layerStyle.contextSettings().opacity() != 1) {\n            returnText.push('opacity: ' + layerStyle.contextSettings().opacity().toFixed(2) + ';');\n        }\n        returnText.push('font-size: ' + 　Math.round((selection.fontSize() / Rate)) + keyCode + ';');\n        var lineHeight = (selection.lineHeight() || selection.font().defaultLineHeightForFont()) / Rate;\n        returnText.push('line-height: ' + Math.round(lineHeight) + keyCode + ';');\n        returnText.push('color: ' + 　colorToJSON(selection.textColor()) + ';');\n        var fontName = selection.font().fontName().toLocaleUpperCase();\n        if (fontName.indexOf('MEDIUM') > 0 || fontName.indexOf('SEMIBOLD') > 0 || fontName.indexOf('BOLD') > 0) {\n            returnText.push('font-weight: bold;');\n        }\n        if (fontName.indexOf('ITALIC') > 0) {\n            returnText.push('font-style: italic;');\n        }\n        return returnText.join('\\n');\n    }\n\n    function exportSize(selection) {\n        var layerStyle = selection.style();\n        var returnText = [];\n\n        if (layerStyle.contextSettings().opacity() != 1) {\n            returnText.push('opacity: ' + layerStyle.contextSettings().opacity().toFixed(2) + ';');\n        }\n\n        if (getRadius(selection) != 0) {\n            returnText.push('border-radius: ' + Math.round(getRadius(selection) / Rate) + keyCode + ';');\n        }\n        var backgroundColor = getFills(layerStyle);\n        var getBorder = getBorders(layerStyle);\n        var getShadow = getShadows(layerStyle);\n        var borderless = 0;\n        var rateX = 1;\n        if (Rate > 1) {\n            rateX = 2;\n        }\n\n        if (getBorder.length > 0) {\n            if (getBorder[0].position == 'inside') {\n                borderless = getBorder[0].thickness * 2 / rateX;\n            }\n            if (getBorder[0].fillType == 'color') {\n                returnText.push('border: ' + Math.round(getBorder[0].thickness / rateX) + keyCode + ' solid ' + (getBorder[0].color) + ';');\n            }\n        }\n\n        if(getShadow.length > 0){\n            var shadowText = 'box-shadow: ';\n            for(var i = 0;i < getShadow.length; i++) {\n                if(i != 0){\n                    shadowText += ',\\n';\n                }\n                shadowText += Math.round(getShadow[i].offsetX / Rate) + keyCode + ' ' + Math.round(getShadow[i].offsetY / Rate) + keyCode + ' ' + Math.round(getShadow[i].blurRadius / Rate) + keyCode + ' ' + Math.round(getShadow[i].spread / Rate) + keyCode + ' ' + getShadow[i].color + (getShadow[i].type == 'inner' ? ' inset': '');\n            }\n            returnText.push(shadowText + ';');\n        }\n\n        var width = selection.rect().size.width / Rate;\n        var height = selection.rect().size.height / Rate;\n        returnText.push('width: ' + Math.round(width - borderless) + keyCode + ';');\n        returnText.push('height: ' + Math.round(height - borderless) + keyCode + ';');\n\n        if (backgroundColor.length > 0) {\n            if (backgroundColor[0].fillType == 'color') {\n                returnText.push('background-color: ' + backgroundColor[0].color + ';');\n            } else if (backgroundColor[0].fillType == 'gradient') {\n                function bzone6(z) {\n                    if (z.length != 6) {\n                        z = '0' + z;\n                    }\n                    if (z.length != 6) {\n                        bzone6(z);\n                    } else {\n                        return z;\n                    }\n                }\n                var param = [];\n                var to = backgroundColor[0].gradient.to;\n                var from = backgroundColor[0].gradient.from;\n                param.push(Math.round(90 - 180 * Math.atan(Math.abs((to.y - from.y)) / Math.abs((to.x - from.x))) / Math.PI) + 'deg');\n                var colorStops = backgroundColor[0].gradient.colorStops;\n                for (var i = 0; i < colorStops.length; i++) {\n                    param.push(colorStops[i].color + ' ' + Math.round(colorStops[i].position * 100) + '%');\n                }\n                returnText.push('background: linear-gradient(' + param.join(',') + ');');\n            }\n        }\n        return returnText.join('\\n');\n    }\n\n    keyCode = NSUserDefaults.standardUserDefaults().objectForKey(codeKey) || 'px';\n    if (context.selection.count() < 1) {\n        return context.document.showMessage(i18.m1);\n    }\n    var showMessage = i18.m2;\n    var selection = context.selection[0];\n    var artboard = selection.parentArtboard();\n    if (artboard == null) {\n        Rate = 1;\n        showMessage += ('，' + i18.m4);\n    } else {\n        artboard = artboard.absoluteRect();\n        var size = artboard.size().width;\n        if (size == 750 || size == 1334 || size == 720) {\n            Rate = 2;\n        } else if (size == 320 || size == 414 || size == 375) {\n            Rate = 1;\n        } else if (size == 1242 || size == 2208 || size == 1080) {\n            Rate = 3;\n        } else {\n            showMessage += ('，' + i18.m3);\n        }\n        if (keyCode == 'rpx') {\n            if (size == 750 || size == 1334 || size == 720 || size == 320 || size == 414 || size == 375 || size == 1242 || size == 2208 || size == 1080) {\n                Rate = parseFloat((size / 750).toFixed(2));\n            } else {\n                Rate = 1;\n            }\n        }\n        if (size > 1334 && size != 2208) {\n            Rate = 1;\n        }\n    }\n\n    getCode(selection);\n    context.document.showMessage(showMessage);\n    var ga = new Analytics(context);\n    if (ga) ga.sendEvent('codeStyle', 'use');\n}\n\nvar onRun = function (context) {\n    codeS(context);\n}","var kPluginDomain;\nvar iconQueryUrl = 'http://123.207.94.56:3000';\nvar loginKey = \"com.sketchplugins.wechat.iconLogin\";\n\nexport function _(context) {\n    var i18nKey = \"com.sketchplugins.wechat.i18n\";\n    var lang = NSUserDefaults.standardUserDefaults().objectForKey(i18nKey);\n    if (lang == undefined) {\n        var macOSVersion = NSDictionary.dictionaryWithContentsOfFile(\"/System/Library/CoreServices/SystemVersion.plist\").objectForKey(\"ProductVersion\") + \"\";\n        lang = NSUserDefaults.standardUserDefaults().objectForKey(\"AppleLanguages\").objectAtIndex(0);\n        lang = (macOSVersion >= \"10.12\") ? lang.split(\"-\").slice(0, -1).join(\"-\") : lang;\n        if (lang.indexOf('zh') > -1) {\n            lang = 'zhCN';\n        } else {\n            lang = 'enUS';\n        }\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n    if (encodeURIComponent(lang.toString()).length != 4) {\n        lang = 'enUS';\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n\n    function get_(json, context) {\n        var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Resources\").URLByAppendingPathComponent(\"i18n\").URLByAppendingPathComponent(json + \".json\").path();\n        var jsonData = NSData.dataWithContentsOfFile(manifestPath);\n        jsonData = NSString.alloc().initWithData_encoding(jsonData,NSUTF8StringEncoding);\n        return JSON.parse(jsonData);\n    }\n    var i18Content = {};\n    i18Content = get_(lang, context);\n\n    return i18Content;\n};\n\nexport function dialog(context) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    return alert;\n}\n\nexport function errorDialog(context,content) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    alert.addButtonWithTitle(_(context).checkForUpdate.m9);\n\n    alert.setMessageText(_(context).checkForUpdate.m10);\n    alert.setInformativeText(content);\n    return alert.runModal();\n}\n\nexport function initDefaults(pluginDomain, initialValues) {\n    kPluginDomain = pluginDomain;\n\n    var defaults = NSUserDefaults.standardUserDefaults().objectForKey(kPluginDomain);\n    var defaultValues = {};\n    var dVal;\n\n    for (var key in defaults) {\n        defaultValues[key] = defaults[key]\n    }\n\n    for (var key in initialValues) {\n        dVal = defaultValues[key]\n        if (dVal == nil) defaultValues[key] = initialValues[key]\n    }\n    return defaultValues;\n}\n\nexport function uploadContext(context) {\n    var contextNow = context;\n    contextNow.document = NSDocumentController.sharedDocumentController().currentDocument();\n    contextNow.selection = context.document.selectedLayers().layers();\n    return contextNow;\n}\n\nexport function paste(text) {\n    var pasteBoard = NSPasteboard.generalPasteboard();\n    pasteBoard.declareTypes_owner(NSArray.arrayWithObject(NSPasteboardTypeString),nil);\n    pasteBoard.setString_forType(text,NSPasteboardTypeString);\n}\n\nexport function rgb(a) {\n    var sColor = a.toLowerCase();\n    if (sColor.length === 4) {\n        var sColorNew = \"#\";\n        for (var i = 1; i < 4; i += 1) {\n            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n        }\n        sColor = sColorNew;\n    }\n    //处理六位的颜色值\n    var sColorChange = [];\n    for (var i = 1; i < 7; i += 2) {\n        sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n    }\n    return sColorChange;\n}\n\nexport function saveDefaults(newValues) {\n    \n}\n\nexport function request(args) {\n    var aara = [args];\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(aara);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\nexport function networkRequest(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\n// zip(['-q','-r','-m','-o','-j','/Users/liuxinyu/Desktop/123.zip','/Users/liuxinyu/Desktop/123'])\nexport function zip(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/zip\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n}\n\nexport function encodeData(jsonData) {\n    var result = {};\n    for (var o in jsonData) {\n        result[o] = typeof jsonData != 'object' ? encodeURIComponent(jsonData[o]) : encodeData(jsonData[o]);\n    }\n    return result;\n}\n\nexport function get(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest([iconQueryUrl + args[0] + '?sig=' + sig + '&' + args[1]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function post(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest(['-d', 'sig=' + sig + '&' + args[1], iconQueryUrl + args[0]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function getConfig(json, context) {\n    var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(json + \".json\").path();\n    return NSJSONSerialization.JSONObjectWithData_options_error(NSData.dataWithContentsOfFile(manifestPath), NSJSONReadingMutableContainers, nil);\n}\n\nexport function openUrlInBrowser(url) {\n    NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(url));\n}\n\nexport function createRadioButtons(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 2);\n    var columns = ((options.length < 2) ? 1 : 2);\n\n    var selectedRow = Math.floor(selectedItem / 2);\n    var selectedColumn = selectedItem - (selectedRow * 2);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(140, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createRadioButtons2(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 3);\n    var columns = 3;\n\n    var selectedRow = Math.floor(selectedItem / 3);\n    var selectedColumn = selectedItem - (selectedRow * 3);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(90, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createArtboard(context, obj) {\n    var doc = context.document;\n\n    var artboard = new MSArtboardGroup();\n\n    artboard.setName(obj.name);\n\n    var frame = artboard.frame();\n\n    frame.setX(obj.x);\n    frame.setY(obj.y);\n    frame.setWidth(obj.width);\n    frame.setHeight(obj.height);\n    doc.currentPage().addLayer(artboard);\n\n    return artboard;\n}\n\nexport function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (result) {\n        result = {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n        };\n    } else {\n        result = null;\n    }\n    return result;\n}\n\nexport function unique(a) {\n    var res = [];\n\n    for (var i = 0, len = a.length; i < len; i++) {\n        var item = a[i];\n\n        for (var j = 0, jLen = res.length; j < jLen; j++) {\n            if (res[j] === item)\n                break;\n        }\n\n        if (j === jLen)\n            res.push(item);\n    }\n\n    return res;\n}\n\n\nfunction MochaJSDelegate(selectorHandlerDict) {\n    var uniqueClassName = \"MochaJSDelegate_DynamicClass_\" + NSUUID.UUID().UUIDString();\n\n    var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName, NSObject);\n\n    delegateClassDesc.registerClass();\n\n    //  Handler storage\n\n    var handlers = {};\n\n    //  Define interface\n\n    this.setHandlerForSelector = function (selectorString, func) {\n        var handlerHasBeenSet = (selectorString in handlers);\n        var selector = NSSelectorFromString(selectorString);\n\n        handlers[selectorString] = func;\n\n        if (!handlerHasBeenSet) {\n            /*\n                For some reason, Mocha acts weird about arguments:\n                https://github.com/logancollins/Mocha/issues/28\n\n                We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n            */\n\n            var dynamicHandler = function () {\n                var functionToCall = handlers[selectorString];\n\n                if (!functionToCall) return;\n\n                return functionToCall.apply(delegateClassDesc, arguments);\n            };\n\n            var args = [],\n                regex = /:/g;\n            while (match = regex.exec(selectorString)) args.push(\"arg\" + args.length);\n\n            dynamicFunction = eval(\"(function(\" + args.join(\",\") + \"){ return dynamicHandler.apply(this, arguments); })\");\n\n            delegateClassDesc.addInstanceMethodWithSelector_function_(selector, dynamicFunction);\n        }\n    };\n\n    this.removeHandlerForSelector = function (selectorString) {\n        delete handlers[selectorString];\n    };\n\n    this.getHandlerForSelector = function (selectorString) {\n        return handlers[selectorString];\n    };\n\n    this.getAllHandlers = function () {\n        return handlers;\n    };\n\n    this.getClass = function () {\n        return NSClassFromString(uniqueClassName);\n    };\n\n    this.getClassInstance = function () {\n        return NSClassFromString(uniqueClassName).new();\n    };\n\n    //  Conveience\n\n    if (typeof selectorHandlerDict == \"object\") {\n        for (var selectorString in selectorHandlerDict) {\n            this.setHandlerForSelector(selectorString, selectorHandlerDict[selectorString]);\n        }\n    }\n};\n\n\n//  sketch-measure\n//  common.js\n//  github https://github.com/utom/sketch-measure\n//  Created by utom\n\nexport function SMPanel(options) {\n    coscript.setShouldKeepAround(true);\n    var self = this,\n        result = false;\n    options.url = encodeURI(\"file://\" + options.url);\n    var frame = NSMakeRect(0, 0, options.width, (options.height + 32)),\n        titleBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1),\n        contentBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1);\n\n    if (options.identifier) {\n        var threadDictionary = NSThread.mainThread().threadDictionary();\n        if (threadDictionary[options.identifier]) {\n            return false;\n        }\n    }\n\n    var Panel = NSPanel.alloc().init();\n    Panel.setTitleVisibility(NSWindowTitleHidden);\n    Panel.setTitlebarAppearsTransparent(true);\n    Panel.standardWindowButton(NSWindowCloseButton).setHidden(options.hiddenClose);\n    Panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n    Panel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n    Panel.setFrame_display(frame, false);\n    Panel.setBackgroundColor(contentBgColor);\n\n    var contentView = Panel.contentView();\n    var webView = WebView.alloc().initWithFrame(NSMakeRect(options.showX ? options.showX : 0, options.showY ? options.showY : 0, options.width, options.height));\n    var windowObject = webView.windowScriptObject(),\n        delegate = new MochaJSDelegate({\n            \"webView:didFinishLoadForFrame:\": (function (webView, webFrame) {\n                var SMAction = [\n                        \"function SMAction(hash, data){\",\n                        \"if(data){\",\n                        \"window.SMData = encodeURI(JSON.stringify(data));\",\n                        \"}\",\n                        \"window.location.hash = hash;\",\n                        \"}\"\n                    ].join(\"\"),\n                    DOMReady = [\n                        \"$(\",\n                        \"function(){\",\n                        \"init(\" + JSON.stringify(options.data) + \")\",\n                        \"}\",\n                        \");\"\n                    ].join(\"\");\n\n                windowObject.evaluateWebScript(SMAction);\n                windowObject.evaluateWebScript(DOMReady);\n            }),\n            \"webView:didChangeLocationWithinPageForFrame:\": (function (webView, webFrame) {\n                var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n                if (request == \"submit\") {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.callback(data);\n                    result = true;\n                } else if (request == \"close\") {\n                    if (!options.floatWindow) {\n                        Panel.orderOut(nil);\n                        NSApp.stopModal();\n                    } else {\n                        Panel.close();\n                    }\n                    threadDictionary.removeObjectForKey(options.identifier);\n                } else if (request == 'submitandclose') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    var closeflag = options.callback(data);\n                    result = true;\n                    if (closeflag) {\n                        if (!options.floatWindow) {\n                            Panel.orderOut(nil);\n                            NSApp.stopModal();\n                        } else {\n                            Panel.close();\n                        }\n                        threadDictionary.removeObjectForKey(options.identifier);\n                    }\n                } else if (request == 'file') {\n                    var panel = NSOpenPanel.openPanel();\n                    panel.setCanChooseDirectories(false);\n                    panel.setCanCreateDirectories(false);\n                    panel.setAllowedFileTypes([\"sketch\", \"json\"]);\n                    panel.setAllowsOtherFileTypes(false);\n                    panel.setExtensionHidden(false);\n                    var clicked = panel.runModal();\n                    if (clicked != NSFileHandlingPanelOKButton) {\n                        windowObject.evaluateWebScript(\"inputFile('\" + '' + \"')\");\n                        return;\n                    }\n                    var firstURL = panel.URLs().objectAtIndex(0);\n                    var unformattedURL = NSString.stringWithFormat(firstURL);\n                    var file_path = unformattedURL.stringByRemovingPercentEncoding();\n                    windowObject.evaluateWebScript(\"inputFile('\" + file_path + \"')\");\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                } else if (request == 'login') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.loginCallback(data, windowObject);\n                } else if (request == 'pushdata') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.pushdataCallback(data, windowObject);\n                }\n                // windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            })\n        });\n\n    contentView.setWantsLayer(true);\n    contentView.layer().setFrame(contentView.frame());\n    contentView.layer().setCornerRadius(6);\n    contentView.layer().setMasksToBounds(true);\n\n    webView.setBackgroundColor(contentBgColor);\n    webView.setFrameLoadDelegate_(delegate.getClassInstance());\n    webView.setMainFrameURL_(options.url);\n\n    contentView.addSubview(webView);\n\n    var closeButton = Panel.standardWindowButton(NSWindowCloseButton);\n    closeButton.setCOSJSTargetFunction(function (sender) {\n        var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n        if (options.closeCallback) {\n            options.closeCallback();\n        }\n\n        if (options.identifier) {\n            threadDictionary.removeObjectForKey(options.identifier);\n        }\n\n        self.wantsStop = true;\n        if (options.floatWindow) {\n            Panel.close();\n        } else {\n            Panel.orderOut(nil);\n            NSApp.stopModal();\n        }\n\n    });\n    closeButton.setAction(\"callAction:\");\n\n    var titlebarView = contentView.superview().titlebarViewController().view(),\n        titlebarContainerView = titlebarView.superview();\n    closeButton.setFrameOrigin(NSMakePoint(8, 8));\n    titlebarContainerView.setFrame(NSMakeRect(0, options.height, options.width, 32));\n    titlebarView.setFrameSize(NSMakeSize(options.width, 32));\n    titlebarView.setTransparent(true);\n    titlebarView.setBackgroundColor(titleBgColor);\n    titlebarContainerView.superview().setBackgroundColor(titleBgColor);\n\n    if (options.floatWindow) {\n        Panel.becomeKeyWindow();\n        Panel.setLevel(NSFloatingWindowLevel);\n        if (!options.showX || !options.showY) {\n            Panel.center();\n        }\n        Panel.makeKeyAndOrderFront(nil);\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        return webView;\n    } else {\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        NSApp.runModalForWindow(Panel);\n    }\n\n    return windowObject;\n}"],"sourceRoot":""}