{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/onAction.js","webpack://exports/./src/toolbar.js"],"names":["selectionDom","selectionDom1","selectionDom2","toolbarAutoShow","updateAutoShow","onSelectionChanged","context","action","actionContext","document","selection","newSelection","count","message","saveMessage","oldSelection","NSUserDefaults","standardUserDefaults","objectForKey","objectID","command","setValue_forKey_onLayer_forPluginIdentifier","i","unshift","push","setObject_forKey","length","onOpenDocument","toolbarAuto","toolbar","auto","i18","_","i18nKey","lang","prefix","toString","pluginSketch","plugin","url","URLByAppendingPathComponent","getImage","size","name","isRetinaDisplay","NSScreen","mainScreen","backingScaleFactor","suffix","imageURL","image","NSImage","alloc","initWithContentsOfURL","addImage","rect","view","NSImageView","initWithFrame","setImage","addButton","callAction","button","NSButton","setBordered","sizeToFit","setButtonType","NSMomentaryChangeButton","setCOSJSTargetFunction","setAction","manifestPath","path","manifest","NSJSONSerialization","JSONObjectWithData_options_error","NSData","dataWithContentsOfFile","NSJSONReadingMutableContainers","nil","commands","obj","istool","identifier","threadDictionary","NSThread","mainThread","Toolbar","coscript","setShouldKeepAround","NSPanel","init","setStyleMask","NSTitledWindowMask","NSFullSizeContentViewWindowMask","setBackgroundColor","NSColor","colorWithRed_green_blue_alpha","setTitleVisibility","NSWindowTitleHidden","setTitlebarAppearsTransparent","toolbarwidth","locationx","frame","height","setFrame_display","NSMakeRect","setMovableByWindowBackground","becomeKeyWindow","setLevel","NSFloatingWindowLevel","join","contentView","closeButton","sender","removeObjectForKey","close","settingsWindow","dialog","addButtonWithTitle","m1","m2","setMessageText","m3","addTextLabelWithValue","m4","m5","response","runModal","addSubview","miaowButton","openUrlInBrowser","xlocation","indexOf","linkButton","nowcontext","uploadContext","getLink","flagButton","getFlag","sortingLayers","iconButton","iconQ","syncuiButton","syncUIkit","synccolorButton","syncColor","textButton","textReplace","colorButton","colorReplace","fontButton","fontReplace","fontCharacters","cutButton","exportSlice","codecolorButton","codeC","codestyleButton","codeS","previewToolbarButton","previewToolbar","makeKeyAndOrderFront","ga","Analytics","sendEvent","onRunToolBar"],"mappings":"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","file":"onAction.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/onAction.js\");\n","import {toolbar} from \"./toolbar\";\n\nvar selectionDom = \"com.sketchplugins.wechat.selectionDom\";\nvar selectionDom1 = \"com.sketchplugins.wechat.selectionDom1\";\nvar selectionDom2 = \"com.sketchplugins.wechat.selectionDom2\";\nvar toolbarAutoShow = \"com.sketchplugins.wechat.toolbarautoshow\";\nvar updateAutoShow = \"com.sketchplugins.wechat.updateAutoShow\";\n\nvar onSelectionChanged = function (context) {\n    var action = context.actionContext;\n    var document = action.document;\n    var selection = action.newSelection;\n\n    var count = selection.count();\n    var message = '';\n    var saveMessage = [];\n\n    if (count == 1 || count == 2) {\n        var oldSelection = NSUserDefaults.standardUserDefaults().objectForKey(selectionDom) || '';\n        if (count == 1) {\n            message = selection[0].objectID();\n            context.command.setValue_forKey_onLayer_forPluginIdentifier(selection[0].objectID(), \"selection1\", selection[0], selectionDom1);\n        } else if (count == 2) {\n            for (var i = 0; i < count; i++) {\n                if (oldSelection == selection[i].objectID()) {\n                    saveMessage.unshift(selection[i]);\n                } else {\n                    saveMessage.push(selection[i]);\n                }\n            }\n            message = saveMessage[0].objectID() + ',' + saveMessage[1].objectID();\n        }\n        NSUserDefaults.standardUserDefaults().setObject_forKey(message, selectionDom);\n    }\n    if (saveMessage.length == 2) {\n        context.command.setValue_forKey_onLayer_forPluginIdentifier(saveMessage[0].objectID(), \"selection1\", saveMessage[0], selectionDom1);\n        context.command.setValue_forKey_onLayer_forPluginIdentifier(saveMessage[1].objectID(), \"selection2\", saveMessage[1], selectionDom2);\n    }\n};\n\n\n\n\nvar onOpenDocument = function (context) {\n    var toolbarAuto = NSUserDefaults.standardUserDefaults().objectForKey(toolbarAutoShow) || '';\n    if (toolbarAuto != 'false') {\n        toolbar(context, true);\n    }\n};","// @import 'common.js';\n// @import 'flag.js';\n// @import 'link.js';\n// @import 'fontReplace.js';\n// @import 'fontCharacters.js';\n// @import 'textReplace.js';\n// @import 'colorReplace.js';\n// @import 'iconQ.js';\n// @import 'syncUIkit.js';\n// @import 'syncColor.js';\n// @import 'exportSlice.js';\n// @import 'codeStyle.js';\n// @import 'codeColor.js';\n// @import 'previewToolbar.js';\n// @import 'sortingLayers.js';\n\n\nexport function toolbar(context, auto) {\n    var i18 = _(context).toolbar;\n    var i18nKey = \"com.sketchplugins.wechat.i18n\";\n    var lang = NSUserDefaults.standardUserDefaults().objectForKey(i18nKey);\n    var prefix = '-' + lang.toString();\n\n    var toolbarAutoShow = \"com.sketchplugins.wechat.toolbarautoshow\";\n    var toolbarAuto = NSUserDefaults.standardUserDefaults().objectForKey(toolbarAutoShow) || '';\n\n\n    var pluginSketch = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(\"library\");\n\n    function getImage(size, name) {\n        var isRetinaDisplay = NSScreen.mainScreen().backingScaleFactor() > 1 ? true : false;\n        var suffix = isRetinaDisplay ? '@2x' : '';\n        var imageURL = pluginSketch.URLByAppendingPathComponent(\"toolbar\").URLByAppendingPathComponent(name + suffix + '.png');\n        var image = NSImage.alloc().initWithContentsOfURL(imageURL);\n        return image\n    }\n\n    function addImage(rect, name) {\n        var view = NSImageView.alloc().initWithFrame(rect),\n            image = getImage(rect.size, name);\n        view.setImage(image);\n        return view;\n    }\n\n    function addButton(rect, name, callAction) {\n        var button = NSButton.alloc().initWithFrame(rect),\n            image = getImage(rect.size, name);\n        button.setImage(image);\n        button.setBordered(false);\n        button.sizeToFit();\n        button.setButtonType(NSMomentaryChangeButton)\n        button.setCOSJSTargetFunction(callAction);\n        button.setAction(\"callAction:\");\n        return button;\n    }\n\n    var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(\"manifest.json\").path(),\n        manifest = NSJSONSerialization.JSONObjectWithData_options_error(NSData.dataWithContentsOfFile(manifestPath), NSJSONReadingMutableContainers, nil),\n        commands = manifest.commands;\n\n    var obj = [];\n    for (var i = 0; i < commands.length; i++) {\n        if (commands[i].istool == 'true') {\n            obj.push(commands[i].identifier);\n        }\n    }\n\n    var identifier = \"com.sketchplugins.wechat.toolbar\",\n        threadDictionary = NSThread.mainThread().threadDictionary(),\n        Toolbar = threadDictionary[identifier];\n\n    if (!Toolbar) {\n        coscript.setShouldKeepAround(true);\n        Toolbar = NSPanel.alloc().init();\n        Toolbar.setStyleMask(NSTitledWindowMask + NSFullSizeContentViewWindowMask);\n        Toolbar.setBackgroundColor(NSColor.colorWithRed_green_blue_alpha(1, 1, 1, 1));\n        Toolbar.setTitleVisibility(NSWindowTitleHidden);\n        Toolbar.setTitlebarAppearsTransparent(true);\n\n\n        var toolbarwidth = (obj.length * 56) + 65;\n\n        var locationx = 0;\n        locationx = NSScreen.mainScreen().frame().size.height - 162;\n        \n\n        Toolbar.setFrame_display(NSMakeRect(285, locationx, toolbarwidth, 85), false);\n        Toolbar.setMovableByWindowBackground(true);\n        Toolbar.becomeKeyWindow();\n        Toolbar.setLevel(NSFloatingWindowLevel);\n        obj = obj.join(',');\n\n\n        var contentView = Toolbar.contentView();\n        var closeButton = addButton(NSMakeRect(20, 53, 11, 11), \"close\",\n            function (sender) {\n                coscript.setShouldKeepAround(false);\n                threadDictionary.removeObjectForKey(identifier);\n                Toolbar.close();\n                if (toolbarAuto != 'false') {\n                    var settingsWindow = dialog(context);\n                    settingsWindow.addButtonWithTitle(i18.m1);\n                    settingsWindow.addButtonWithTitle(i18.m2);\n                    settingsWindow.setMessageText(i18.m3);\n                    settingsWindow.addTextLabelWithValue(i18.m4);\n                    settingsWindow.addTextLabelWithValue(i18.m5);\n                    var response = settingsWindow.runModal();\n                    if (response == \"1000\") {\n                        NSUserDefaults.standardUserDefaults().setObject_forKey('true', toolbarAutoShow);\n                    } else {\n                        NSUserDefaults.standardUserDefaults().setObject_forKey('false', toolbarAutoShow);\n                    }\n                }\n            });\n        contentView.addSubview(closeButton);\n\n        // var wikiButton = addButton(NSMakeRect(60, 40, 15, 15), \"wiki\",\n        //     function (sender) {\n        //         openUrlInBrowser('https://github.com/weixin/wesketch/wiki');\n        //     });\n        // contentView.addSubview(wikiButton);\n\n        var miaowButton = addButton(NSMakeRect(0, 11, 120, 66), \"miaow\",\n        function (sender) {\n            openUrlInBrowser('https://github.com/weixin/wesketch');\n        });\n        contentView.addSubview(miaowButton);\n\n        var xlocation = 50;\n\n        if (obj.indexOf('link') > -1) {\n            var linkButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"link\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    getLink(nowcontext);\n                });\n\n            contentView.addSubview(linkButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('flag') > -1) {\n\n            var flagButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"flag\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    getFlag(nowcontext);\n                });\n            contentView.addSubview(flagButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('sortingLayers') > -1) {\n\n            var flagButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"sorting\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    sortingLayers(nowcontext);\n                });\n            contentView.addSubview(flagButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('iconQ') > -1) {\n            var iconButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"icon\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    iconQ(nowcontext);\n                });\n            contentView.addSubview(iconButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('syncuikit') > -1) {\n            var syncuiButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"syncui\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    syncUIkit(nowcontext);\n                });\n            contentView.addSubview(syncuiButton);\n            xlocation = xlocation + 56;\n        }\n\n\n        if (obj.indexOf('synccolor') > -1) {\n            var synccolorButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"synccolor\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    syncColor(nowcontext);\n                });\n            contentView.addSubview(synccolorButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('textReplace') > -1) {\n            var textButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"text\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    textReplace(nowcontext);\n                });\n\n            contentView.addSubview(textButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('colorReplace') > -1) {\n            var colorButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"color\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    colorReplace(nowcontext);\n                });\n            contentView.addSubview(colorButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('fontReplace') > -1) {\n            var fontButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"font\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    fontReplace(nowcontext);\n                });\n            contentView.addSubview(fontButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('fontCharacters') > -1) {\n            var fontButton = addButton(NSMakeRect(xlocation + 3, 19, 47, 46), \"fontCharacters\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    fontCharacters(nowcontext);\n                });\n            contentView.addSubview(fontButton);\n            xlocation = xlocation + 55;\n        }\n\n\n        if (obj.indexOf('exportSlice') > -1) {\n            var cutButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"cut\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    exportSlice(nowcontext);\n                });\n            contentView.addSubview(cutButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('codeColor') > -1) {\n            var codecolorButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"codecolor\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    codeC(nowcontext);\n                });\n            contentView.addSubview(codecolorButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('codeStyle') > -1) {\n            var codestyleButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"codestyle\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    codeS(nowcontext);\n                });\n            contentView.addSubview(codestyleButton);\n            xlocation = xlocation + 56;\n        }\n\n        if (obj.indexOf('previewToolbar') > -1) {\n            var previewToolbarButton = addButton(NSMakeRect(xlocation + 3, 19, 46, 46), \"preview\" + prefix,\n                function (sender) {\n                    var nowcontext = uploadContext(context);\n                    previewToolbar(nowcontext);\n                });\n\n            contentView.addSubview(previewToolbarButton);\n            xlocation = xlocation + 56;\n        }\n\n\n        threadDictionary[identifier] = Toolbar;\n        Toolbar.makeKeyAndOrderFront(nil);\n        var ga = new Analytics(context);\n        if (ga) ga.sendEvent('toolbar', 'open');\n    } else if (Toolbar && !auto) {\n        threadDictionary.removeObjectForKey(identifier);\n        Toolbar.close();\n    }\n}\n\nvar onRunToolBar = function (context) {\n    toolbar(context);\n}"],"sourceRoot":""}