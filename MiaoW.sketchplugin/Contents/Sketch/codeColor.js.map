{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/codeColor.js","webpack://exports/./src/common.js"],"names":["codeC","context","i18","_","codeColor","BorderPositions","FillTypes","GradientTypes","ShadowTypes","TextAligns","ResizingType","pointToJSON","point","x","parseFloat","y","colorStopToJSON","colorStop","color","colorToJSON","position","gradientToJSON","gradient","stopsData","stop","stopIter","stops","objectEnumerator","nextObject","push","type","gradientType","from","to","colorStops","getFills","style","fillsData","fill","fillIter","fills","isEnabled","fillType","fillData","getBorders","bordersData","border","borderIter","borders","borderData","thickness","obj","r","Math","round","red","g","green","b","blue","a","alpha","bzone","d","length","toString","toFixed","getColor","selection","text","class","exportText","exportSize","paste","layerStyle","returnText","textColor","join","backgroundColor","borderColor","bzone6","z","param","parseInt","atan","abs","PI","i","pasteBoard","NSPasteboard","generalPasteboard","declareTypes_owner","NSArray","arrayWithObject","NSPasteboardTypeString","nil","setString_forType","document","showMessage","m1","m2","count","m3","ga","Analytics","sendEvent","codeCAction","kPluginDomain","iconQueryUrl","loginKey","i18nKey","lang","NSUserDefaults","standardUserDefaults","objectForKey","undefined","macOSVersion","NSDictionary","dictionaryWithContentsOfFile","objectAtIndex","split","slice","indexOf","setObject_forKey","encodeURIComponent","get_","json","manifestPath","plugin","url","URLByAppendingPathComponent","path","jsonData","NSData","dataWithContentsOfFile","NSString","alloc","initWithData_encoding","NSUTF8StringEncoding","JSON","parse","i18Content","dialog","iconImage","NSImage","initByReferencingFile","urlForResourceNamed","alert","COSAlertWindow","new","setIcon","errorDialog","content","addButtonWithTitle","checkForUpdate","m9","setMessageText","m10","setInformativeText","runModal","initDefaults","pluginDomain","initialValues","defaults","defaultValues","dVal","key","uploadContext","contextNow","NSDocumentController","sharedDocumentController","currentDocument","selectedLayers","layers","rgb","sColor","toLowerCase","sColorNew","concat","sColorChange","saveDefaults","newValues","request","args","aara","task","NSTask","init","setLaunchPath","setArguments","outputPipe","NSPipe","pipe","setStandardOutput","launch","responseData","fileHandleForReading","readDataToEndOfFile","networkRequest","zip","encodeData","result","o","get","sig","returnData","status","msg","post","getConfig","NSJSONSerialization","JSONObjectWithData_options_error","NSJSONReadingMutableContainers","openUrlInBrowser","NSWorkspace","sharedWorkspace","openURL","NSURL","URLWithString","createRadioButtons","options","selectedItem","ui","NSRadioButton","NSRadioModeMatrix","rows","ceil","columns","selectedRow","floor","selectedColumn","buttonCell","NSButtonCell","setButtonType","buttonMatrix","NSMatrix","initWithFrame_mode_prototype_numberOfRows_numberOfColumns","NSMakeRect","setCellSize","NSMakeSize","cells","setTitle","setTag","setTransparent","setEnabled","selectCellAtRow_column","createRadioButtons2","createArtboard","doc","artboard","MSArtboardGroup","setName","name","frame","setX","setY","setWidth","width","setHeight","height","currentPage","addLayer","hexToRgb","hex","exec","unique","res","len","item","j","jLen","MochaJSDelegate","selectorHandlerDict","uniqueClassName","NSUUID","UUID","UUIDString","delegateClassDesc","MOClassDescription","allocateDescriptionForClassWithName_superclass_","NSObject","registerClass","handlers","setHandlerForSelector","selectorString","func","handlerHasBeenSet","selector","NSSelectorFromString","dynamicHandler","functionToCall","apply","arguments","regex","match","dynamicFunction","eval","addInstanceMethodWithSelector_function_","removeHandlerForSelector","getHandlerForSelector","getAllHandlers","getClass","NSClassFromString","getClassInstance","SMPanel","coscript","setShouldKeepAround","self","encodeURI","titleBgColor","NSColor","colorWithRed_green_blue_alpha","contentBgColor","identifier","threadDictionary","NSThread","mainThread","Panel","NSPanel","setTitleVisibility","NSWindowTitleHidden","setTitlebarAppearsTransparent","standardWindowButton","NSWindowCloseButton","setHidden","hiddenClose","NSWindowMiniaturizeButton","NSWindowZoomButton","setFrame_display","setBackgroundColor","contentView","webView","WebView","initWithFrame","showX","showY","windowObject","windowScriptObject","delegate","webFrame","SMAction","DOMReady","stringify","data","evaluateWebScript","mainFrameURL","fragment","decodeURI","valueForKey","callback","floatWindow","orderOut","NSApp","stopModal","close","removeObjectForKey","closeflag","panel","NSOpenPanel","openPanel","setCanChooseDirectories","setCanCreateDirectories","setAllowedFileTypes","setAllowsOtherFileTypes","setExtensionHidden","clicked","NSFileHandlingPanelOKButton","firstURL","URLs","unformattedURL","stringWithFormat","file_path","stringByRemovingPercentEncoding","loginCallback","pushdataCallback","setWantsLayer","layer","setFrame","setCornerRadius","setMasksToBounds","setFrameLoadDelegate_","setMainFrameURL_","addSubview","closeButton","setCOSJSTargetFunction","sender","closeCallback","wantsStop","setAction","titlebarView","superview","titlebarViewController","view","titlebarContainerView","setFrameOrigin","NSMakePoint","setFrameSize","becomeKeyWindow","setLevel","NSFloatingWindowLevel","center","makeKeyAndOrderFront","runModalForWindow"],"mappings":"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","file":"codeColor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/codeColor.js\");\n","import {_,dialog,errorDialog,initDefaults,saveDefaults,uploadContext,paste,rgb,request,networkRequest,zip,encodeData,get,post,getConfig,openUrlInBrowser,createRadioButtons,createRadioButtons2,createArtboard,hexToRgb,unique,SMPanel} from \"./common\";\n\n\nfunction codeC(context) {\n    var i18 = _(context).codeColor;\n    var BorderPositions = [\"center\", \"inside\", \"outside\"],\n        FillTypes = [\"color\", \"gradient\"],\n        GradientTypes = [\"linear\", \"radial\", \"angular\"],\n        ShadowTypes = [\"outer\", \"inner\"],\n        TextAligns = [\"left\", \"right\", \"center\", \"justify\", \"left\"],\n        ResizingType = [\"stretch\", \"corner\", \"resize\", \"float\"];\n\n    function pointToJSON(point) {\n        return {\n            x: parseFloat(point.x),\n            y: parseFloat(point.y)\n        };\n    }\n\n    function colorStopToJSON(colorStop) {\n        return {\n            color: colorToJSON(colorStop.color()),\n            position: colorStop.position()\n        };\n    }\n\n    function gradientToJSON(gradient) {\n        var stopsData = [],\n            stop, stopIter = gradient.stops().objectEnumerator();\n        while (stop = stopIter.nextObject()) {\n            stopsData.push(colorStopToJSON(stop));\n        }\n\n        return {\n            type: GradientTypes[gradient.gradientType()],\n            from: pointToJSON(gradient.from()),\n            to: pointToJSON(gradient.to()),\n            colorStops: stopsData\n        };\n    }\n\n    function getFills(style) {\n        var fillsData = [],\n            fill, fillIter = style.fills().objectEnumerator();\n        while (fill = fillIter.nextObject()) {\n            if (fill.isEnabled()) {\n                var fillType = FillTypes[fill.fillType()],\n                    fillData = {\n                        fillType: fillType\n                    };\n\n                switch (fillType) {\n                    case \"color\":\n                        fillData.color = colorToJSON(fill.color());\n                        break;\n\n                    case \"gradient\":\n                        fillData.gradient = gradientToJSON(fill.gradient());\n                        break;\n\n                    default:\n                        continue;\n                }\n\n                fillsData.push(fillData);\n            }\n        }\n\n        return fillsData;\n    }\n\n    function getBorders(style) {\n        var bordersData = [],\n            border, borderIter = style.borders().objectEnumerator();\n        while (border = borderIter.nextObject()) {\n            if (border.isEnabled()) {\n                var fillType = FillTypes[border.fillType()],\n                    borderData = {\n                        fillType: fillType,\n                        position: BorderPositions[border.position()],\n                        thickness: border.thickness()\n                    };\n\n                switch (fillType) {\n                    case \"color\":\n                        borderData.color = colorToJSON(border.color());\n                        break;\n\n                    case \"gradient\":\n                        borderData.gradient = gradientToJSON(border.gradient());\n                        break;\n\n                    default:\n                        continue;\n                }\n\n                bordersData.push(borderData);\n            }\n        }\n\n        return bordersData;\n    }\n\n    function colorToJSON(color) {\n        var obj = {\n            r: Math.round(color.red() * 255),\n            g: Math.round(color.green() * 255),\n            b: Math.round(color.blue() * 255),\n            a: color.alpha()\n        }\n\n        function bzone(d) {\n            if (d.length == 1) {\n                d = '0' + d;\n            }\n            return d;\n        }\n        if (obj.a == 1) {\n            return '#' + bzone(obj.r.toString(16)) + bzone(obj.g.toString(16)) + bzone(obj.b.toString(16));\n        } else {\n            return 'rgba(' + obj.r + ',' + obj.g + ',' + obj.b + ',' + obj.a.toFixed(2) + ')';\n        }\n    }\n\n\n    function getColor(selection) {\n        var text = '';\n        if (selection.class() == 'MSTextLayer') {\n            text = exportText(selection);\n        } else {\n            text = exportSize(selection);\n        }\n        paste(text);\n    }\n\n    function exportText(selection) {\n        var layerStyle = selection.style();\n        var returnText = [];\n        returnText.push(colorToJSON(selection.textColor()));\n        return returnText.join('');\n    }\n\n    function exportSize(selection) {\n        var layerStyle = selection.style();\n        var returnText = [];\n        var backgroundColor = getFills(layerStyle);\n        var borderColor = getBorders(layerStyle);\n\n        if (backgroundColor.length > 0) {\n            if (backgroundColor[0].fillType == 'color') {\n                returnText.push(backgroundColor[0].color);\n            } else if (backgroundColor[0].fillType == 'gradient') {\n                function bzone6(z) {\n                    if (z.length != 6) {\n                        z = '0' + z;\n                    }\n                    if (z.length != 6) {\n                        bzone6(z);\n                    } else {\n                        return z;\n                    }\n                }\n                var param = [];\n                var to = backgroundColor[0].gradient.to;\n                var from = backgroundColor[0].gradient.from;\n                param.push(parseInt(90 - 180 * Math.atan(Math.abs((to.y - from.y)) / Math.abs((to.x - from.x))) / Math.PI) + 'deg');\n                var colorStops = backgroundColor[0].gradient.colorStops;\n                for (var i = 0; i < colorStops.length; i++) {\n                    param.push(colorStops[i].color + ' ' + parseInt(colorStops[i].position * 100) + '%');\n                }\n                returnText.push('linear-gradient(' + param.join(',') + ')');\n            }\n        } else if (borderColor.length > 0) {\n            returnText.push(borderColor[0].color);\n        }\n\n        return returnText.join('');\n    }\n\n    function paste(text) {\n        if (text != '') {\n            var pasteBoard = NSPasteboard.generalPasteboard();\n            pasteBoard.declareTypes_owner(NSArray.arrayWithObject(NSPasteboardTypeString),nil);\n            pasteBoard.setString_forType(text,NSPasteboardTypeString);\n            context.document.showMessage(i18.m1);\n        } else {\n            context.document.showMessage(i18.m2);\n        }\n    }\n    if (context.selection.count() < 1) {\n        return context.document.showMessage(i18.m3);\n    }\n    var selection = context.selection[0];\n    getColor(selection);\n    var ga = new Analytics(context);\n    if (ga) ga.sendEvent('codeColor', 'use');\n}\nexport function codeCAction(context) {\n    codeC(context);\n}","var kPluginDomain;\nvar iconQueryUrl = 'http://123.207.94.56:3000';\nvar loginKey = \"com.sketchplugins.wechat.iconLogin\";\n\nexport function _(context) {\n    var i18nKey = \"com.sketchplugins.wechat.i18n\";\n    var lang = NSUserDefaults.standardUserDefaults().objectForKey(i18nKey);\n    if (lang == undefined) {\n        var macOSVersion = NSDictionary.dictionaryWithContentsOfFile(\"/System/Library/CoreServices/SystemVersion.plist\").objectForKey(\"ProductVersion\") + \"\";\n        lang = NSUserDefaults.standardUserDefaults().objectForKey(\"AppleLanguages\").objectAtIndex(0);\n        lang = (macOSVersion >= \"10.12\") ? lang.split(\"-\").slice(0, -1).join(\"-\") : lang;\n        if (lang.indexOf('zh') > -1) {\n            lang = 'zhCN';\n        } else {\n            lang = 'enUS';\n        }\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n    if (encodeURIComponent(lang.toString()).length != 4) {\n        lang = 'enUS';\n        NSUserDefaults.standardUserDefaults().setObject_forKey(lang, i18nKey);\n    }\n\n    function get_(json, context) {\n        var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Resources\").URLByAppendingPathComponent(\"i18n\").URLByAppendingPathComponent(json + \".json\").path();\n        var jsonData = NSData.dataWithContentsOfFile(manifestPath);\n        jsonData = NSString.alloc().initWithData_encoding(jsonData,NSUTF8StringEncoding);\n        return JSON.parse(jsonData);\n    }\n    var i18Content = {};\n    i18Content = get_(lang, context);\n\n    return i18Content;\n};\n\nexport function dialog(context) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    return alert;\n}\n\nexport function errorDialog(context,content) {\n    var iconImage = NSImage.alloc().initByReferencingFile(context.plugin.urlForResourceNamed(\"icon.png\").path());\n    var alert = COSAlertWindow.new();\n    if (iconImage) {\n        alert.setIcon(iconImage);\n    }\n    alert.addButtonWithTitle(_(context).checkForUpdate.m9);\n\n    alert.setMessageText(_(context).checkForUpdate.m10);\n    alert.setInformativeText(content);\n    return alert.runModal();\n}\n\nexport function initDefaults(pluginDomain, initialValues) {\n    kPluginDomain = pluginDomain;\n\n    var defaults = NSUserDefaults.standardUserDefaults().objectForKey(kPluginDomain);\n    var defaultValues = {};\n    var dVal;\n\n    for (var key in defaults) {\n        defaultValues[key] = defaults[key]\n    }\n\n    for (var key in initialValues) {\n        dVal = defaultValues[key]\n        if (dVal == nil) defaultValues[key] = initialValues[key]\n    }\n    return defaultValues;\n}\n\nexport function uploadContext(context) {\n    var contextNow = context;\n    contextNow.document = NSDocumentController.sharedDocumentController().currentDocument();\n    contextNow.selection = context.document.selectedLayers().layers();\n    return contextNow;\n}\n\nexport function paste(text) {\n    var pasteBoard = NSPasteboard.generalPasteboard();\n    pasteBoard.declareTypes_owner(NSArray.arrayWithObject(NSPasteboardTypeString),nil);\n    pasteBoard.setString_forType(text,NSPasteboardTypeString);\n}\n\nexport function rgb(a) {\n    var sColor = a.toLowerCase();\n    if (sColor.length === 4) {\n        var sColorNew = \"#\";\n        for (var i = 1; i < 4; i += 1) {\n            sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n        }\n        sColor = sColorNew;\n    }\n    //处理六位的颜色值\n    var sColorChange = [];\n    for (var i = 1; i < 7; i += 2) {\n        sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n    }\n    return sColorChange;\n}\n\nexport function saveDefaults(newValues) {\n    \n}\n\nexport function request(args) {\n    var aara = [args];\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(aara);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\nexport function networkRequest(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/curl\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n    var responseData = outputPipe.fileHandleForReading().readDataToEndOfFile();\n    return responseData;\n}\n\n// zip(['-q','-r','-m','-o','-j','/Users/liuxinyu/Desktop/123.zip','/Users/liuxinyu/Desktop/123'])\nexport function zip(args) {\n    var task = NSTask.alloc().init();\n    task.setLaunchPath(\"/usr/bin/zip\");\n    task.setArguments(args);\n    var outputPipe = NSPipe.pipe();\n    task.setStandardOutput(outputPipe);\n    task.launch();\n}\n\nexport function encodeData(jsonData) {\n    var result = {};\n    for (var o in jsonData) {\n        result[o] = typeof jsonData != 'object' ? encodeURIComponent(jsonData[o]) : encodeData(jsonData[o]);\n    }\n    return result;\n}\n\nexport function get(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest([iconQueryUrl + args[0] + '?sig=' + sig + '&' + args[1]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function post(args) {\n    var sig = NSUserDefaults.standardUserDefaults().objectForKey(loginKey);\n    var returnData = networkRequest(['-d', 'sig=' + sig + '&' + args[1], iconQueryUrl + args[0]]);\n    var jsonData = NSString.alloc().initWithData_encoding(returnData,NSUTF8StringEncoding);\n    jsonData = JSON.parse(jsonData);\n    if (jsonData.status == 200) {\n        return jsonData;\n    } else {\n        errorDialog(context,jsonData.msg);\n        return jsonData;\n    }\n}\n\nexport function getConfig(json, context) {\n    var manifestPath = context.plugin.url().URLByAppendingPathComponent(\"Contents\").URLByAppendingPathComponent(\"Sketch\").URLByAppendingPathComponent(json + \".json\").path();\n    return NSJSONSerialization.JSONObjectWithData_options_error(NSData.dataWithContentsOfFile(manifestPath), NSJSONReadingMutableContainers, nil);\n}\n\nexport function openUrlInBrowser(url) {\n    NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString(url));\n}\n\nexport function createRadioButtons(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 2);\n    var columns = ((options.length < 2) ? 1 : 2);\n\n    var selectedRow = Math.floor(selectedItem / 2);\n    var selectedColumn = selectedItem - (selectedRow * 2);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(140, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createRadioButtons2(options, selectedItem) {\n    var ui = NSRadioButton;\n    var type = NSRadioModeMatrix;\n\n    var rows = Math.ceil(options.length / 3);\n    var columns = 3;\n\n    var selectedRow = Math.floor(selectedItem / 3);\n    var selectedColumn = selectedItem - (selectedRow * 3);\n\n    var buttonCell = NSButtonCell.alloc().init();\n    buttonCell.setButtonType(ui);\n\n    var buttonMatrix = NSMatrix.alloc().initWithFrame_mode_prototype_numberOfRows_numberOfColumns(NSMakeRect(20.0, 20.0, 300.0, rows * 25),type,buttonCell,rows,columns);\n    buttonMatrix.setCellSize(NSMakeSize(90, 20));\n\n    for (var i = 0; i < options.length; i++) {\n        buttonMatrix.cells().objectAtIndex(i).setTitle(options[i]);\n        buttonMatrix.cells().objectAtIndex(i).setTag(i);\n    }\n\n    if (rows * columns > options.length) {\n        buttonMatrix.cells().objectAtIndex(options.length).setTransparent(true);\n        buttonMatrix.cells().objectAtIndex(options.length).setEnabled(false);\n    }\n    buttonMatrix.selectCellAtRow_column(selectedRow,selectedColumn);\n    return buttonMatrix;\n}\n\nexport function createArtboard(context, obj) {\n    var doc = context.document;\n\n    var artboard = new MSArtboardGroup();\n\n    artboard.setName(obj.name);\n\n    var frame = artboard.frame();\n\n    frame.setX(obj.x);\n    frame.setY(obj.y);\n    frame.setWidth(obj.width);\n    frame.setHeight(obj.height);\n    doc.currentPage().addLayer(artboard);\n\n    return artboard;\n}\n\nexport function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (result) {\n        result = {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n        };\n    } else {\n        result = null;\n    }\n    return result;\n}\n\nexport function unique(a) {\n    var res = [];\n\n    for (var i = 0, len = a.length; i < len; i++) {\n        var item = a[i];\n\n        for (var j = 0, jLen = res.length; j < jLen; j++) {\n            if (res[j] === item)\n                break;\n        }\n\n        if (j === jLen)\n            res.push(item);\n    }\n\n    return res;\n}\n\n\nfunction MochaJSDelegate(selectorHandlerDict) {\n    var uniqueClassName = \"MochaJSDelegate_DynamicClass_\" + NSUUID.UUID().UUIDString();\n\n    var delegateClassDesc = MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName, NSObject);\n\n    delegateClassDesc.registerClass();\n\n    //  Handler storage\n\n    var handlers = {};\n\n    //  Define interface\n\n    this.setHandlerForSelector = function (selectorString, func) {\n        var handlerHasBeenSet = (selectorString in handlers);\n        var selector = NSSelectorFromString(selectorString);\n\n        handlers[selectorString] = func;\n\n        if (!handlerHasBeenSet) {\n            /*\n                For some reason, Mocha acts weird about arguments:\n                https://github.com/logancollins/Mocha/issues/28\n\n                We have to basically create a dynamic handler with a likewise dynamic number of predefined arguments.\n            */\n\n            var dynamicHandler = function () {\n                var functionToCall = handlers[selectorString];\n\n                if (!functionToCall) return;\n\n                return functionToCall.apply(delegateClassDesc, arguments);\n            };\n\n            var args = [],\n                regex = /:/g;\n            while (match = regex.exec(selectorString)) args.push(\"arg\" + args.length);\n\n            dynamicFunction = eval(\"(function(\" + args.join(\",\") + \"){ return dynamicHandler.apply(this, arguments); })\");\n\n            delegateClassDesc.addInstanceMethodWithSelector_function_(selector, dynamicFunction);\n        }\n    };\n\n    this.removeHandlerForSelector = function (selectorString) {\n        delete handlers[selectorString];\n    };\n\n    this.getHandlerForSelector = function (selectorString) {\n        return handlers[selectorString];\n    };\n\n    this.getAllHandlers = function () {\n        return handlers;\n    };\n\n    this.getClass = function () {\n        return NSClassFromString(uniqueClassName);\n    };\n\n    this.getClassInstance = function () {\n        return NSClassFromString(uniqueClassName).new();\n    };\n\n    //  Conveience\n\n    if (typeof selectorHandlerDict == \"object\") {\n        for (var selectorString in selectorHandlerDict) {\n            this.setHandlerForSelector(selectorString, selectorHandlerDict[selectorString]);\n        }\n    }\n};\n\n\n//  sketch-measure\n//  common.js\n//  github https://github.com/utom/sketch-measure\n//  Created by utom\n\nexport function SMPanel(options) {\n    coscript.setShouldKeepAround(true);\n    var self = this,\n        result = false;\n    options.url = encodeURI(\"file://\" + options.url);\n    var frame = NSMakeRect(0, 0, options.width, (options.height + 32)),\n        titleBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1),\n        contentBgColor = NSColor.colorWithRed_green_blue_alpha(0.945, 0.945, 0.945, 1);\n\n    if (options.identifier) {\n        var threadDictionary = NSThread.mainThread().threadDictionary();\n        if (threadDictionary[options.identifier]) {\n            return false;\n        }\n    }\n\n    var Panel = NSPanel.alloc().init();\n    Panel.setTitleVisibility(NSWindowTitleHidden);\n    Panel.setTitlebarAppearsTransparent(true);\n    Panel.standardWindowButton(NSWindowCloseButton).setHidden(options.hiddenClose);\n    Panel.standardWindowButton(NSWindowMiniaturizeButton).setHidden(true);\n    Panel.standardWindowButton(NSWindowZoomButton).setHidden(true);\n    Panel.setFrame_display(frame, false);\n    Panel.setBackgroundColor(contentBgColor);\n\n    var contentView = Panel.contentView();\n    var webView = WebView.alloc().initWithFrame(NSMakeRect(options.showX ? options.showX : 0, options.showY ? options.showY : 0, options.width, options.height));\n    var windowObject = webView.windowScriptObject(),\n        delegate = new MochaJSDelegate({\n            \"webView:didFinishLoadForFrame:\": (function (webView, webFrame) {\n                var SMAction = [\n                        \"function SMAction(hash, data){\",\n                        \"if(data){\",\n                        \"window.SMData = encodeURI(JSON.stringify(data));\",\n                        \"}\",\n                        \"window.location.hash = hash;\",\n                        \"}\"\n                    ].join(\"\"),\n                    DOMReady = [\n                        \"$(\",\n                        \"function(){\",\n                        \"init(\" + JSON.stringify(options.data) + \")\",\n                        \"}\",\n                        \");\"\n                    ].join(\"\");\n\n                windowObject.evaluateWebScript(SMAction);\n                windowObject.evaluateWebScript(DOMReady);\n            }),\n            \"webView:didChangeLocationWithinPageForFrame:\": (function (webView, webFrame) {\n                var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n                if (request == \"submit\") {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.callback(data);\n                    result = true;\n                } else if (request == \"close\") {\n                    if (!options.floatWindow) {\n                        Panel.orderOut(nil);\n                        NSApp.stopModal();\n                    } else {\n                        Panel.close();\n                    }\n                    threadDictionary.removeObjectForKey(options.identifier);\n                } else if (request == 'submitandclose') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    var closeflag = options.callback(data);\n                    result = true;\n                    if (closeflag) {\n                        if (!options.floatWindow) {\n                            Panel.orderOut(nil);\n                            NSApp.stopModal();\n                        } else {\n                            Panel.close();\n                        }\n                        threadDictionary.removeObjectForKey(options.identifier);\n                    }\n                } else if (request == 'file') {\n                    var panel = NSOpenPanel.openPanel();\n                    panel.setCanChooseDirectories(false);\n                    panel.setCanCreateDirectories(false);\n                    panel.setAllowedFileTypes([\"sketch\", \"json\"]);\n                    panel.setAllowsOtherFileTypes(false);\n                    panel.setExtensionHidden(false);\n                    var clicked = panel.runModal();\n                    if (clicked != NSFileHandlingPanelOKButton) {\n                        windowObject.evaluateWebScript(\"inputFile('\" + '' + \"')\");\n                        return;\n                    }\n                    var firstURL = panel.URLs().objectAtIndex(0);\n                    var unformattedURL = NSString.stringWithFormat(firstURL);\n                    var file_path = unformattedURL.stringByRemovingPercentEncoding();\n                    windowObject.evaluateWebScript(\"inputFile('\" + file_path + \"')\");\n                    windowObject.evaluateWebScript(\"window.location.hash = '';\");\n                } else if (request == 'login') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.loginCallback(data, windowObject);\n                } else if (request == 'pushdata') {\n                    var data = JSON.parse(decodeURI(windowObject.valueForKey(\"SMData\")));\n                    options.pushdataCallback(data, windowObject);\n                }\n                // windowObject.evaluateWebScript(\"window.location.hash = '';\");\n            })\n        });\n\n    contentView.setWantsLayer(true);\n    contentView.layer().setFrame(contentView.frame());\n    contentView.layer().setCornerRadius(6);\n    contentView.layer().setMasksToBounds(true);\n\n    webView.setBackgroundColor(contentBgColor);\n    webView.setFrameLoadDelegate_(delegate.getClassInstance());\n    webView.setMainFrameURL_(options.url);\n\n    contentView.addSubview(webView);\n\n    var closeButton = Panel.standardWindowButton(NSWindowCloseButton);\n    closeButton.setCOSJSTargetFunction(function (sender) {\n        var request = NSURL.URLWithString(webView.mainFrameURL()).fragment();\n\n        if (options.closeCallback) {\n            options.closeCallback();\n        }\n\n        if (options.identifier) {\n            threadDictionary.removeObjectForKey(options.identifier);\n        }\n\n        self.wantsStop = true;\n        if (options.floatWindow) {\n            Panel.close();\n        } else {\n            Panel.orderOut(nil);\n            NSApp.stopModal();\n        }\n\n    });\n    closeButton.setAction(\"callAction:\");\n\n    var titlebarView = contentView.superview().titlebarViewController().view(),\n        titlebarContainerView = titlebarView.superview();\n    closeButton.setFrameOrigin(NSMakePoint(8, 8));\n    titlebarContainerView.setFrame(NSMakeRect(0, options.height, options.width, 32));\n    titlebarView.setFrameSize(NSMakeSize(options.width, 32));\n    titlebarView.setTransparent(true);\n    titlebarView.setBackgroundColor(titleBgColor);\n    titlebarContainerView.superview().setBackgroundColor(titleBgColor);\n\n    if (options.floatWindow) {\n        Panel.becomeKeyWindow();\n        Panel.setLevel(NSFloatingWindowLevel);\n        if (!options.showX || !options.showY) {\n            Panel.center();\n        }\n        Panel.makeKeyAndOrderFront(nil);\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        return webView;\n    } else {\n        if (options.identifier) {\n            threadDictionary[options.identifier] = Panel;\n        }\n        NSApp.runModalForWindow(Panel);\n    }\n\n    return windowObject;\n}"],"sourceRoot":""}